(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[9684],{79684:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Clipboard:()=>T,Collapse:()=>o.Collapser,CommandLinker:()=>D,CommandToolbarButton:()=>o.CommandToolbarButton,CommandToolbarButtonComponent:()=>o.CommandToolbarButtonComponent,DOMUtils:()=>B,Dialog:()=>v,HoverBox:()=>o.HoverBox,ICommandPalette:()=>de,IFrame:()=>o.IFrame,IKernelStatusModel:()=>ce,ISanitizer:()=>pe,ISessionContextDialogs:()=>he,ISplashScreen:()=>_e,IThemeManager:()=>ue,IToolbarWidgetRegistry:()=>me,IWindowResolver:()=>ge,InputDialog:()=>$,KernelStatus:()=>I,MainAreaWidget:()=>Y,MenuFactory:()=>X,ModalCommandPalette:()=>N,Notification:()=>Z,NotificationManager:()=>J,Printing:()=>U,ReactWidget:()=>o.ReactWidget,RunningSessions:()=>ee,Sanitizer:()=>ie,SemanticCommand:()=>oe,SessionContext:()=>y,SessionContextDialogs:()=>w,Spinner:()=>o.Spinner,Styling:()=>o.Styling,ThemeManager:()=>le,Toolbar:()=>Ae,ToolbarButton:()=>o.ToolbarButton,ToolbarButtonComponent:()=>o.ToolbarButtonComponent,ToolbarWidgetRegistry:()=>fe,UseSignal:()=>o.UseSignal,VDomModel:()=>o.VDomModel,VDomRenderer:()=>o.VDomRenderer,WidgetTracker:()=>m,WindowResolver:()=>ke,addCommandToolbarButtonClass:()=>o.addCommandToolbarButtonClass,addToolbarButtonClass:()=>o.addToolbarButtonClass,createDefaultFactory:()=>be,createToolbarFactory:()=>Ee,setToolbar:()=>Te,showDialog:()=>f,showErrorMessage:()=>b,translateKernelStatuses:()=>A});var s,i,o=n(15388),r=n(31256),a=n(80281),l=n(59407),d=n.n(l),c=n(28748),h=n(45945),u=n(68211),p=n(30427),_=n(60731),g=n(41670);class m{constructor(e){this._currentChanged=new p.Signal(this),this._deferred=null,this._isDisposed=!1,this._widgetAdded=new p.Signal(this),this._widgetUpdated=new p.Signal(this);const t=this._focusTracker=new a.FocusTracker,n=this._pool=new g.RestorablePool(e);this.namespace=e.namespace,t.currentChanged.connect(((e,t)=>{t.newValue!==this.currentWidget&&(n.current=t.newValue)}),this),n.added.connect(((e,t)=>{this._widgetAdded.emit(t)}),this),n.currentChanged.connect(((e,s)=>{null===s&&t.currentWidget?n.current=t.currentWidget:(this.onCurrentChanged(s),this._currentChanged.emit(s))}),this),n.updated.connect(((e,t)=>{this._widgetUpdated.emit(t)}),this)}get currentChanged(){return this._currentChanged}get currentWidget(){return this._pool.current||null}get restored(){return this._deferred?Promise.resolve():this._pool.restored}get size(){return this._pool.size}get widgetAdded(){return this._widgetAdded}get widgetUpdated(){return this._widgetUpdated}async add(e){this._focusTracker.add(e),await this._pool.add(e),this._focusTracker.activeWidget||(this._pool.current=e)}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._pool.dispose(),this._focusTracker.dispose(),p.Signal.clearData(this))}find(e){return this._pool.find(e)}forEach(e){return this._pool.forEach(e)}filter(e){return this._pool.filter(e)}inject(e){return this._pool.inject(e)}has(e){return this._pool.has(e)}async restore(e){const t=this._deferred;return t?(this._deferred=null,this._pool.restore(t)):e?this._pool.restore(e):void console.warn("No options provided to restore the tracker.")}defer(e){this._deferred=e}async save(e){return this._pool.save(e)}onCurrentChanged(e){}}function f(e={}){return new v(e).launch()}function b(e,t,n){const i=v.translator.load("jupyterlab");n=null!=n?n:[v.okButton({label:i.__("Dismiss")})],console.warn("Showing error:",t);const o="string"==typeof t?t:t.message,r=e+"----"+o,a=s.errorMessagePromiseCache.get(r);if(a)return a;{const t=f({title:e,body:o,buttons:n}).then((()=>{s.errorMessagePromiseCache.delete(r)}),(e=>{throw s.errorMessagePromiseCache.delete(r),e}));return s.errorMessagePromiseCache.set(r,t),t}}class v extends a.Widget{constructor(e={}){const t=document.createElement("dialog");t.ariaModal="true",super({node:t}),this._hasValidationErrors=!1,this._ready=new u.PromiseDelegate,this._focusNodeSelector="",this.addClass("jp-Dialog");const n=s.handleOptions(e),i=n.renderer;if(this._host=n.host,this._defaultButton=n.defaultButton,this._buttons=n.buttons,this._hasClose=n.hasClose,this._buttonNodes=this._buttons.map((e=>i.createButtonNode(e))),this._checkboxNode=null,this._lastMouseDownInDialog=!1,n.checkbox){const{label:e="",caption:t="",checked:s=!1,className:o=""}=n.checkbox;this._checkboxNode=i.createCheckboxNode({label:e,caption:null!=t?t:e,checked:s,className:o})}const o=this.layout=new a.PanelLayout,r=new a.Panel;r.addClass("jp-Dialog-content"),"string"==typeof e.body&&(r.addClass("jp-Dialog-content-small"),t.ariaLabel=[n.title,e.body].join(" ")),o.addWidget(r),this._body=n.body;const l=i.createHeader(n.title,(()=>this.reject()),e),d=i.createBody(n.body),c=i.createFooter(this._buttonNodes,this._checkboxNode);r.addWidget(l),r.addWidget(d),r.addWidget(c),this._bodyWidget=d,this._primary=this._buttonNodes[this._defaultButton],this._focusNodeSelector=e.focusNodeSelector,v.tracker.add(this)}get ready(){return this._ready.promise}dispose(){const e=this._promise;e&&(this._promise=null,e.reject(void 0),h.ArrayExt.removeFirstOf(s.launchQueue,e.promise)),super.dispose()}launch(){if(this._promise)return this._promise.promise;const e=this._promise=new u.PromiseDelegate,t=Promise.all(s.launchQueue);return s.launchQueue.push(this._promise.promise),t.then((()=>this._promise?(a.Widget.attach(this,this._host),e.promise):Promise.resolve({button:v.cancelButton(),isChecked:null,value:null})))}resolve(e){this._promise&&(void 0===e&&(e=this._defaultButton),this._resolve(this._buttons[e]))}reject(){this._promise&&this._resolve(v.cancelButton())}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMouseDown(e);break;case"click":this._evtClick(e);break;case"input":this._evtInput(e);break;case"focus":this._evtFocus(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,!0),t.addEventListener("contextmenu",this,!0),t.addEventListener("click",this,!0),document.addEventListener("mousedown",this,!0),document.addEventListener("focus",this,!0),document.addEventListener("input",this,!0),this._first=s.findFirstFocusable(this.node),this._original=document.activeElement;const n=()=>{var e;if(this._focusNodeSelector){const e=this.node.querySelector(".jp-Dialog-body"),t=null==e?void 0:e.querySelector(this._focusNodeSelector);t&&(this._primary=t)}null===(e=this._primary)||void 0===e||e.focus(),this._ready.resolve()};this._bodyWidget instanceof o.ReactWidget&&void 0!==this._bodyWidget.renderPromise?this._bodyWidget.renderPromise.then((()=>{n()})).catch((()=>{console.error("Error while loading Dialog's body")})):n()}onAfterDetach(e){const t=this.node;t.removeEventListener("keydown",this,!0),t.removeEventListener("contextmenu",this,!0),t.removeEventListener("click",this,!0),document.removeEventListener("focus",this,!0),document.removeEventListener("mousedown",this,!0),document.removeEventListener("input",this,!0),this._original.focus()}onCloseRequest(e){this._promise&&this.reject(),super.onCloseRequest(e)}_evtInput(e){this._hasValidationErrors=!!this.node.querySelector(":invalid");for(let e=0;e<this._buttons.length;e++)this._buttons[e].accept&&(this._buttonNodes[e].disabled=this._hasValidationErrors)}_evtClick(e){if(!this.node.getElementsByClassName("jp-Dialog-content")[0].contains(e.target))return e.stopPropagation(),e.preventDefault(),void(this._hasClose&&!this._lastMouseDownInDialog&&this.reject());for(const t of this._buttonNodes)if(t.contains(e.target)){const e=this._buttonNodes.indexOf(t);this.resolve(e)}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation(),e.preventDefault(),this._hasClose&&this.reject();break;case 37:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)-1;n<0&&(n=this._buttonNodes.length-1);const s=this._buttonNodes[n];e.stopPropagation(),e.preventDefault(),s.focus()}break}case 39:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)+1;n==this._buttons.length&&(n=0);const s=this._buttonNodes[n];e.stopPropagation(),e.preventDefault(),s.focus()}break}case 9:{const t=this._buttonNodes[this._buttons.length-1];document.activeElement!==t||e.shiftKey||(e.stopPropagation(),e.preventDefault(),this._first.focus());break}case 13:{e.stopPropagation(),e.preventDefault();const t=document.activeElement;let n;t instanceof HTMLButtonElement&&(n=this._buttonNodes.indexOf(t)),this.resolve(n);break}}}_evtFocus(e){var t;const n=e.target;this.node.contains(n)||(e.stopPropagation(),null===(t=this._buttonNodes[this._defaultButton])||void 0===t||t.focus())}_evtMouseDown(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0],n=e.target;this._lastMouseDownInDialog=t.contains(n)}_resolve(e){var t,n,i;if(this._hasValidationErrors&&e.accept)return;const o=this._promise;if(!o)return void this.dispose();this._promise=null,h.ArrayExt.removeFirstOf(s.launchQueue,o.promise);const r=this._body;let l=null;e.accept&&r instanceof a.Widget&&"function"==typeof r.getValue&&(l=r.getValue()),this.dispose(),o.resolve({button:e,isChecked:null!==(i=null===(n=null===(t=this._checkboxNode)||void 0===t?void 0:t.querySelector("input"))||void 0===n?void 0:n.checked)&&void 0!==i?i:null,value:l})}}!function(e){function t(t){t.accept=!1!==t.accept;const n=e.translator.load("jupyterlab"),s=t.accept?n.__("Ok"):n.__("Cancel");return{ariaLabel:t.ariaLabel||t.label||s,label:t.label||s,iconClass:t.iconClass||"",iconLabel:t.iconLabel||"",caption:t.caption||"",className:t.className||"",accept:t.accept,actions:t.actions||[],displayType:t.displayType||"default"}}e.translator=r.nullTranslator,e.createButton=t,e.cancelButton=function(e={}){return e.accept=!1,t(e)},e.okButton=function(e={}){return e.accept=!0,t(e)},e.warnButton=function(e={}){return e.displayType="warn",t(e)},e.flush=function(){e.tracker.forEach((e=>{e.dispose()}))};class n{createHeader(t,n=()=>{},s={}){let i;const r=e=>{0===e.button&&(e.preventDefault(),n())},a=e=>{const{key:t}=e;"Enter"!==t&&" "!==t||n()};if("string"==typeof t){const n=e.translator.load("jupyterlab");i=o.ReactWidget.create(l.createElement(l.Fragment,null,t,s.hasClose&&l.createElement(o.Button,{className:"jp-Dialog-close-button",onMouseDown:r,onKeyDown:a,title:n.__("Cancel"),minimal:!0},l.createElement(o.LabIcon.resolveReact,{icon:o.closeIcon,tag:"span"}))))}else i=o.ReactWidget.create(t);return i.addClass("jp-Dialog-header"),o.Styling.styleNode(i.node),i}createBody(e){const t=e=>{void 0!==e.renderPromise?e.renderPromise.then((()=>{o.Styling.styleNode(e.node)})).catch((()=>{console.error("Error while loading Dialog's body")})):o.Styling.styleNode(e.node)};let n;return"string"==typeof e?(n=new a.Widget({node:document.createElement("span")}),n.node.textContent=e):e instanceof a.Widget?(n=e,n instanceof o.ReactWidget?t(n):o.Styling.styleNode(n.node)):(n=o.ReactWidget.create(e),_.MessageLoop.sendMessage(n,a.Widget.Msg.UpdateRequest),t(n)),n.addClass("jp-Dialog-body"),n}createFooter(e,t){const n=new a.Widget;n.addClass("jp-Dialog-footer"),t&&(n.node.appendChild(t),n.node.insertAdjacentHTML("beforeend",'<div class="jp-Dialog-spacer"></div>'));for(const t of e)n.node.appendChild(t);return o.Styling.styleNode(n.node),n}createButtonNode(e){const t=document.createElement("button");return t.className=this.createItemClass(e),t.appendChild(this.renderIcon(e)),t.appendChild(this.renderLabel(e)),t}createCheckboxNode(e){const t=document.createElement("label");t.className="jp-Dialog-checkbox",e.className&&t.classList.add(e.className),t.title=e.caption,t.textContent=e.label;const n=document.createElement("input");return n.type="checkbox",n.checked=!!e.checked,t.insertAdjacentElement("afterbegin",n),t}createItemClass(e){let t="jp-Dialog-button";e.accept?t+=" jp-mod-accept":t+=" jp-mod-reject","warn"===e.displayType&&(t+=" jp-mod-warn");const n=e.className;return n&&(t+=` ${n}`),t}renderIcon(e){const t=document.createElement("div");return t.className=this.createIconClass(e),t.appendChild(document.createTextNode(e.iconLabel)),t}createIconClass(e){const t="jp-Dialog-buttonIcon",n=e.iconClass;return n?`${t} ${n}`:t}renderLabel(e){const t=document.createElement("div");return t.className="jp-Dialog-buttonLabel",t.title=e.caption,t.ariaLabel=e.ariaLabel,t.appendChild(document.createTextNode(e.label)),t}}e.Renderer=n,e.defaultRenderer=new n,e.tracker=new m({namespace:"@jupyterlab/apputils:Dialog"})}(v||(v={})),function(e){e.launchQueue=[],e.errorMessagePromiseCache=new Map,e.handleOptions=function(e={}){var t,n,s,i,o,r,a,l,d;const c=null!==(t=e.buttons)&&void 0!==t?t:[v.cancelButton(),v.okButton()];return{title:null!==(n=e.title)&&void 0!==n?n:"",body:null!==(s=e.body)&&void 0!==s?s:"",host:null!==(i=e.host)&&void 0!==i?i:document.body,checkbox:null!==(o=e.checkbox)&&void 0!==o?o:null,buttons:c,defaultButton:null!==(r=e.defaultButton)&&void 0!==r?r:c.length-1,renderer:null!==(a=e.renderer)&&void 0!==a?a:v.defaultRenderer,focusNodeSelector:null!==(l=e.focusNodeSelector)&&void 0!==l?l:"",hasClose:null===(d=e.hasClose)||void 0===d||d}},e.findFirstFocusable=function(e){const t=["input","select","a[href]","textarea","button","[tabindex]"].join(",");return e.querySelectorAll(t)[0]}}(s||(s={}));class y{constructor(e){var t,n,s,i;this._path="",this._name="",this._type="",this._prevKernelName="",this._isDisposed=!1,this._disposed=new p.Signal(this),this._session=null,this._ready=new u.PromiseDelegate,this._initializing=!1,this._initStarted=new u.PromiseDelegate,this._initPromise=new u.PromiseDelegate,this._isReady=!1,this._isTerminating=!1,this._isRestarting=!1,this._kernelChanged=new p.Signal(this),this._preferenceChanged=new p.Signal(this),this._sessionChanged=new p.Signal(this),this._statusChanged=new p.Signal(this),this._connectionStatusChanged=new p.Signal(this),this._pendingInput=!1,this._iopubMessage=new p.Signal(this),this._unhandledMessage=new p.Signal(this),this._propertyChanged=new p.Signal(this),this._dialog=null,this._busyDisposable=null,this._pendingKernelName="",this._pendingSessionRequest="",this.sessionManager=e.sessionManager,this.specsManager=e.specsManager,this.translator=e.translator||r.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._path=null!==(t=e.path)&&void 0!==t?t:u.UUID.uuid4(),this._type=null!==(n=e.type)&&void 0!==n?n:"",this._name=null!==(s=e.name)&&void 0!==s?s:"",this._setBusy=e.setBusy,this._kernelPreference=null!==(i=e.kernelPreference)&&void 0!==i?i:{}}get session(){var e;return null!==(e=this._session)&&void 0!==e?e:null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!u.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e,this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:u.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){var e,t,n,s,i,o,r;const a=null===(e=this.session)||void 0===e?void 0:e.kernel;return this._pendingKernelName===this.noKernelName?this.noKernelName:this._pendingKernelName?null!==(s=null===(n=null===(t=this.specsManager.specs)||void 0===t?void 0:t.kernelspecs[this._pendingKernelName])||void 0===n?void 0:n.display_name)&&void 0!==s?s:this._pendingKernelName:a?null!==(r=null===(o=null===(i=this.specsManager.specs)||void 0===i?void 0:i.kernelspecs[a.name])||void 0===o?void 0:o.display_name)&&void 0!==r?r:a.name:this.noKernelName}get kernelDisplayStatus(){var e,t;const n=null===(e=this.session)||void 0===e?void 0:e.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!n&&this._pendingKernelName?"initializing":n||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?null!==(t="connected"===(null==n?void 0:n.connectionStatus)?null==n?void 0:n.status:null==n?void 0:n.connectionStatus)&&void 0!==t?t:"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)})),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),p.Signal.clearData(this))}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&!1===e.shouldStart)return!0;let t;if(e.id)t={id:e.id};else{const n=i.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});n&&(t={name:n})}if(t)try{return await this._changeKernel(t),!1}catch(e){}return!0}async restartKernel(){var e,t,n,s,i,o;const r=(null===(e=this.session)||void 0===e?void 0:e.kernel)||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(null===(n=null===(t=this.session)||void 0===t?void 0:t.kernel)||void 0===n?void 0:n.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit((null===(i=null===(s=this.session)||void 0===s?void 0:s.kernel)||void 0===i?void 0:i.status)||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:r,newValue:(null===(o=this.session)||void 0===o?void 0:o.kernel)||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=(0,h.find)(e.running(),(e=>e.path===this._path));if(t)try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(e){return this._handleSessionError(e),Promise.reject(e)}return await this._startIfNecessary()}async _shutdownSession(){var e;const t=this._session,n=this._isTerminating,s=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(null==t?void 0:t.shutdown()),this._isTerminating=!1,null==t||t.dispose(),this._session=null;const e=(null==t?void 0:t.kernel)||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:t,newValue:null})}catch(i){this._isTerminating=n,this._isReady=s;const o=null===(e=null==t?void 0:t.kernel)||void 0===e?void 0:e.status;throw void 0===o?this._statusChanged.emit("unknown"):this._statusChanged.emit(o),i}}async _startIfNecessary(){var e;const t=this.kernelPreference;return!this.isDisposed&&!(null===(e=this.session)||void 0===e?void 0:e.kernel)&&!1!==t.shouldStart&&!1!==t.canStart&&this.startKernel()}async _changeKernel(e={}){if(e.name&&(this._pendingKernelName=e.name),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._session&&!this._isTerminating)try{return await this._session.changeKernel(e),this._session.kernel}catch(e){throw this._handleSessionError(e),e}const t=c.PathExt.dirname(this._path),n=this._pendingSessionRequest=c.PathExt.join(t,u.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:n,type:this._type,name:this._name,kernel:e});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(e){throw this._handleSessionError(e),e}}_handleNewSession(e){var t,n,s;if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=null!==(n=null===(t=e.kernel)||void 0===t?void 0:t.name)&&void 0!==n?n:"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:(null==e?void 0:e.kernel)||null,name:"kernel"}),this._statusChanged.emit((null===(s=null==e?void 0:e.kernel)||void 0===s?void 0:s.status)||"unknown"),(null==e?void 0:e.kernel)||null}async _handleSessionError(e){this._handleNewSession(null);let t="",n="";try{t=e.traceback,n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=l.createElement("div",null,e&&l.createElement("pre",null,e),t&&l.createElement("details",{className:"jp-mod-wide"},l.createElement("pre",null,t))),s=this._dialog=new v({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[v.okButton()]});await s.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){var n;if("dead"===t){const t=null===(n=e.kernel)||void 0===n?void 0:n.model;if(null==t?void 0:t.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}!function(e){e.getDefaultKernel=function(e){const{preference:t}=e,{shouldStart:n}=t;return!1===n?null:i.getDefaultKernel(e)}}(y||(y={}));class w{constructor(e={}){var t;this._translator=null!==(t=e.translator)&&void 0!==t?t:r.nullTranslator}async selectKernel(e){if(e.isDisposed)return Promise.resolve();const t=this._translator.load("jupyterlab");let n=t.__("Cancel");e.hasNoKernel&&(n=e.kernelDisplayName);const s=[v.cancelButton({label:n}),v.okButton({label:t.__("Select"),ariaLabel:t.__("Select Kernel")})],o=e.kernelPreference.autoStartDefault,r="boolean"==typeof o,a=new v({title:t.__("Select Kernel"),body:new i.KernelSelector(e,this._translator),buttons:s,checkbox:r?{label:t.__("Always start the preferred kernel"),caption:t.__("Remember my choice and always start the preferred kernel"),checked:o}:null}),l=await a.launch();if(e.isDisposed||!l.button.accept)return;r&&null!==l.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:l.isChecked});const d=l.value;if(null===d&&!e.hasNoKernel)return e.shutdown();d&&await e.changeKernel(d)}async restart(e){var t;const n=this._translator.load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const s=null===(t=e.session)||void 0===t?void 0:t.kernel;if(!s&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!s)throw new Error("No kernel to restart");const i=v.warnButton({label:n.__("Restart"),ariaLabel:n.__("Confirm Kernel Restart")}),o=await f({title:n.__("Restart Kernel?"),body:n.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[v.cancelButton({ariaLabel:n.__("Cancel Kernel Restart")}),i]});return!s.isDisposed&&!!o.button.accept&&(await e.restartKernel(),!0)}}!function(e){class t extends a.Widget{constructor(e,t){super({node:n(e,t)})}getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}function n(e,t){const n=(t=t||r.nullTranslator).load("jupyterlab"),i=document.createElement("div"),o=document.createElement("label");o.textContent=`${n.__("Select kernel for:")} "${e.name}"`,i.appendChild(o);const a=function(e){return{specs:e.specsManager.specs,sessions:e.sessionManager.running(),preference:e.kernelPreference}}(e),l=document.createElement("select");return s(l,a,t,e.hasNoKernel?null:e.kernelDisplayName),i.appendChild(l),i}function s(e,t,n,s=null){for(var a;e.firstChild;)e.removeChild(e.firstChild);const{preference:d,sessions:c,specs:h}=t,{name:u,id:p,language:_,canStart:g,shouldStart:m}=d,f=(n=n||r.nullTranslator).load("jupyterlab");if(!h||!1===g)return e.appendChild(o(n)),e.value="null",void(e.disabled=!0);e.disabled=!1;const b=Object.create(null),v=Object.create(null);for(const e in h.kernelspecs){const t=h.kernelspecs[e];b[e]=t.display_name,v[e]=t.language}const y=[];if(u&&u in h.kernelspecs&&y.push(u),u&&y.length>0&&_)for(const e in h.kernelspecs)u!==e&&v[e]===_&&y.push(e);y.length||y.push(h.default);const w=document.createElement("optgroup");w.label=f.__("Start Preferred Kernel"),y.sort(((e,t)=>b[e].localeCompare(b[t])));for(const e of y)w.appendChild(i(e,b[e]));w.firstChild&&e.appendChild(w),e.appendChild(o(n));const C=document.createElement("optgroup");C.label=f.__("Start Other Kernel");const E=[];for(const e in h.kernelspecs)-1===y.indexOf(e)&&E.push(e);E.sort(((e,t)=>b[e].localeCompare(b[t])));for(const e of E)C.appendChild(i(e,b[e]));if(E.length&&e.appendChild(C),!1===m)e.value="null";else{let t=0;s&&(t=[...e.options].findIndex((e=>e.text===s)),t=Math.max(t,0)),e.selectedIndex=t}if(!c)return;const T=[],k=[];for(const e of c)_&&e.kernel&&v[e.kernel.name]===_&&e.kernel.id!==p?T.push(e):(null===(a=e.kernel)||void 0===a?void 0:a.id)!==p&&k.push(e);const S=document.createElement("optgroup");if(S.label=f.__("Use Kernel from Preferred Session"),e.appendChild(S),T.length){T.sort(((e,t)=>e.path.localeCompare(t.path)));for(const e of T){const t=e.kernel?b[e.kernel.name]:"";S.appendChild(l(e,t,n))}}const A=document.createElement("optgroup");if(A.label=f.__("Use Kernel from Other Session"),e.appendChild(A),k.length){k.sort(((e,t)=>e.path.localeCompare(t.path)));for(const e of k){const t=e.kernel?b[e.kernel.name]||e.kernel.name:"";A.appendChild(l(e,t,n))}}}function i(e,t){const n=document.createElement("option");return n.text=t,n.value=JSON.stringify({name:e}),n}function o(e){const t=(e=e||r.nullTranslator).load("jupyterlab"),n=document.createElement("optgroup");n.label=t.__("Use No Kernel");const s=document.createElement("option");return s.text=t.__("No Kernel"),s.value="null",n.appendChild(s),n}function l(e,t,n){var s,i;const o=(n=n||r.nullTranslator).load("jupyterlab"),a=document.createElement("option"),l=e.name||c.PathExt.basename(e.path);return a.text=l,a.value=JSON.stringify({id:null===(s=e.kernel)||void 0===s?void 0:s.id}),a.title=`${o.__("Path:")} ${e.path}\n${o.__("Name:")} ${l}\n${o.__("Kernel Name:")} ${t}\n${o.__("Kernel Id:")} ${null===(i=e.kernel)||void 0===i?void 0:i.id}`,a}e.KernelSelector=t,e.getDefaultKernel=function(e){var t;const{specs:n,preference:s}=e,{name:i,language:o,canStart:r,autoStartDefault:a}=s;if(!n||!1===r)return null;const l=a?n.default:null;if(!i&&!o)return l;for(const e in n.kernelspecs)if(e===i)return i;if(!o)return l;const d=[];for(const e in n.kernelspecs)o===(null===(t=n.kernelspecs[e])||void 0===t?void 0:t.language)&&d.push(e);if(1===d.length){const e=d[0];return console.warn("No exact match found for "+e+", using kernel "+e+" that matches language="+o),e}return l},e.populateKernelSelect=s}(i||(i={}));var C,E,T,k,S=n(41205);function A(e){const t=(e=e||r.nullTranslator).load("jupyterlab");return{unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""}}function R(e){const t=(e.translator||r.nullTranslator).load("jupyterlab");let n="";return e.status&&(n=` | ${e.status}`),d().createElement(S.pC,{onClick:e.handleClick,onKeyDown:e.handleKeyDown,source:`${e.kernelName}${n}`,title:t.__("Change kernel for %1",e.activityName),tabIndex:0})}class I extends o.VDomRenderer{constructor(e,t){super(new I.Model(t)),this.translator=t||r.nullTranslator,this._handleClick=e.onClick,this._handleKeyDown=e.onKeyDown,this.addClass("jp-mod-highlighted")}render(){return null===this.model?null:d().createElement(R,{status:this.model.status,kernelName:this.model.kernelName,activityName:this.model.activityName,handleClick:this._handleClick,handleKeyDown:this._handleKeyDown,translator:this.translator})}}!function(e){class t extends o.VDomModel{constructor(e){super(),this._activityName="",this._kernelName="",this._kernelStatus="",this._sessionContext=null,e=null!=e?e:r.nullTranslator,this._trans=e.load("jupyterlab"),this._statusNames=A(e)}get kernelName(){return this._kernelName}get status(){return this._kernelStatus?this._statusNames[this._kernelStatus]:void 0}get activityName(){return this._activityName}set activityName(e){this._activityName!==e&&(this._activityName=e,this.stateChanged.emit())}get sessionContext(){return this._sessionContext}set sessionContext(e){var t,n,s,i;null===(t=this._sessionContext)||void 0===t||t.statusChanged.disconnect(this._onKernelStatusChanged,this),null===(n=this._sessionContext)||void 0===n||n.connectionStatusChanged.disconnect(this._onKernelStatusChanged,this),null===(s=this._sessionContext)||void 0===s||s.kernelChanged.disconnect(this._onKernelChanged,this);const o=this._getAllState();this._sessionContext=e,this._kernelStatus=null==e?void 0:e.kernelDisplayStatus,this._kernelName=null!==(i=null==e?void 0:e.kernelDisplayName)&&void 0!==i?i:this._trans.__("No Kernel"),null==e||e.statusChanged.connect(this._onKernelStatusChanged,this),null==e||e.connectionStatusChanged.connect(this._onKernelStatusChanged,this),null==e||e.kernelChanged.connect(this._onKernelChanged,this),this._triggerChange(o,this._getAllState())}_onKernelStatusChanged(){var e;this._kernelStatus=null===(e=this._sessionContext)||void 0===e?void 0:e.kernelDisplayStatus,this.stateChanged.emit(void 0)}_onKernelChanged(e,t){var n;const s=this._getAllState();this._kernelStatus=null===(n=this._sessionContext)||void 0===n?void 0:n.kernelDisplayStatus,this._kernelName=e.kernelDisplayName,this._triggerChange(s,this._getAllState())}_getAllState(){return[this._kernelName,this._kernelStatus,this._activityName]}_triggerChange(e,t){u.JSONExt.deepEqual(e,t)&&this.stateChanged.emit(void 0)}}e.Model=t}(I||(I={})),function(e){e.createInterruptButton=function(e,t){const n=(t=t||r.nullTranslator).load("jupyterlab");return new o.ToolbarButton({icon:o.stopIcon,onClick:()=>{var t,n;null===(n=null===(t=e.session)||void 0===t?void 0:t.kernel)||void 0===n||n.interrupt()},tooltip:n.__("Interrupt the kernel")})},e.createRestartButton=function(e,t,n){const s=(n=null!=n?n:r.nullTranslator).load("jupyterlab");return new o.ToolbarButton({icon:o.refreshIcon,onClick:()=>{(null!=t?t:new w({translator:n})).restart(e)},tooltip:s.__("Restart the kernel")})},e.createKernelNameItem=function(e,t,n){const s=o.ReactWidget.create(l.createElement(E.KernelNameComponent,{sessionContext:e,dialogs:null!=t?t:new w({translator:n}),translator:n}));return s.addClass("jp-KernelName"),s},e.createKernelStatusItem=function(e,t){return new E.KernelStatus(e,t)}}(C||(C={})),function(e){e.KernelNameComponent=function(e){const t=(e.translator||r.nullTranslator).load("jupyterlab"),n=()=>{e.dialogs.selectKernel(e.sessionContext)};return l.createElement(o.UseSignal,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>l.createElement(o.ToolbarButtonComponent,{className:"jp-Toolbar-kernelName",onClick:n,tooltip:t.__("Switch kernel"),label:null==e?void 0:e.kernelDisplayName})))};class t extends a.Widget{constructor(e,t){super(),this.translator=t||r.nullTranslator,this._trans=this.translator.load("jupyterlab"),this.addClass("jp-Toolbar-kernelStatus"),this._statusNames=A(this.translator),this._onStatusChanged(e),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed)return;const t=e.kernelDisplayStatus,n={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};o.LabIcon.remove(this.node),"busy"===t||"starting"===t||"terminating"===t||"restarting"===t||"initializing"===t?o.circleIcon.element(n):"connecting"===t||"disconnected"===t||"unknown"===t?o.offlineBoltIcon.element(n):o.circleEmptyIcon.element(n)}}e.KernelStatus=t}(E||(E={})),function(e){function t(e,t="copy"){let n=window.getSelection();const s=[];for(let e=0,t=(null==n?void 0:n.rangeCount)||0;e<t;++e)s[e]=n.getRangeAt(e).cloneRange();const i=document.createRange();if(i.selectNodeContents(e),n&&(n.removeAllRanges(),n.addRange(i)),document.execCommand(t),n=window.getSelection(),n){n.removeAllRanges();for(let e=0,t=s.length;e<t;++e)n.addRange(s[e])}}e.getInstance=function(){return k.instance},e.setInstance=function(e){k.instance=e},e.copyToSystem=function(e){const n=document.body,s=t=>{const i=t.clipboardData||window.clipboardData;"string"==typeof e?i.setData("text",e):e.types().map((t=>{i.setData(t,e.getData(t))})),t.preventDefault(),n.removeEventListener("copy",s)};n.addEventListener("copy",s),t(n)},e.generateEvent=t}(T||(T={})),function(e){e.instance=new u.MimeData}(k||(k={}));const x="commandlinker-command",P="commandlinker-args";class D{constructor(e){this._isDisposed=!1,this._commands=e.commands,document.body.addEventListener("click",this)}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,document.body.removeEventListener("click",this))}connectNode(e,t,n){return e.setAttribute(`data-${x}`,t),void 0!==n&&e.setAttribute(`data-${P}`,JSON.stringify(n)),e}disconnectNode(e){return e.removeAttribute(`data-${x}`),e.removeAttribute(`data-${P}`),e}handleEvent(e){"click"===e.type&&this._evtClick(e)}populateVNodeDataset(e,t){let n;return n=void 0!==t?{[P]:JSON.stringify(t),[x]:e}:{[x]:e},n}_evtClick(e){let t=e.target;for(;t&&t.parentElement;){if(t.hasAttribute(`data-${x}`)){e.preventDefault();const n=t.getAttribute(`data-${x}`);if(!n)return;const s=t.getAttribute(`data-${P}`);let i=u.JSONExt.emptyObject;return s&&(i=JSON.parse(s)),void this._commands.execute(n,i)}t=t.parentElement}}}const O="jp-SearchIconGroup";class N extends a.Panel{constructor(e){super(),this.addClass("jp-ModalCommandPalette"),this.id="modal-command-palette",this.palette=e.commandPalette,this._commandPalette.commands.commandExecuted.connect((()=>{this.isAttached&&this.isVisible&&this.hideAndReset()})),this.node.tabIndex=0}get palette(){return this._commandPalette}set palette(e){this._commandPalette=e,this.searchIconGroup||this._commandPalette.inputNode.insertAdjacentElement("afterend",this.createSearchIconGroup()),this.addWidget(e),this.hideAndReset()}attach(){a.Widget.attach(this,document.body)}detach(){a.Widget.detach(this)}hideAndReset(){this.hide(),this._commandPalette.inputNode.value="",this._commandPalette.refresh()}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"blur":this.node.contains(e.target)&&!this.node.contains(e.relatedTarget)&&(e.stopPropagation(),this.hideAndReset());break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}get searchIconGroup(){return this._commandPalette.node.getElementsByClassName(O)[0]}createSearchIconGroup(){const e=document.createElement("div");return e.classList.add(O),o.searchIcon.render(e),e}onAfterAttach(e){this.node.addEventListener("keydown",this,!0),this.node.addEventListener("contextmenu",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this,!0),this.node.removeEventListener("contextmenu",this,!0)}onBeforeHide(e){document.removeEventListener("blur",this,!0)}onAfterShow(e){document.addEventListener("blur",this,!0)}onActivateRequest(e){this.isAttached&&(this.show(),this._commandPalette.activate())}_evtKeydown(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.hideAndReset())}}var B,$,L=n(72363);!function(e){e.hitTestNodes=function(e,t,n){return h.ArrayExt.findFirstIndex(e,(e=>L.ElementExt.hitTest(e,t,n)))},e.findElement=function(e,t){return e.querySelector(`.${t}`)},e.findElements=function(e,t){return e.getElementsByClassName(t)},e.createDomID=function(){return`id-${u.UUID.uuid4()}`},e.hasActiveEditableElement=function e(t,n=document){const s=n.activeElement;return!!(s&&t.contains(s)&&(s.matches(":read-write")||s.shadowRoot&&e(s.shadowRoot,s.shadowRoot)))}}(B||(B={})),function(e){e.getBoolean=function(e){return f({...e,body:new K(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})},e.getNumber=function(e){return f({...e,body:new j(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})},e.getItem=function(e){return f({...e,body:new F(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:e.editable?"input":"select"})},e.getMultipleItems=function(e){return f({...e,body:new H(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})]})},e.getText=function(e){return f({...e,body:new z(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})},e.getPassword=function(e){return f({...e,body:new G(e),buttons:[v.cancelButton({label:e.cancelLabel}),v.okButton({label:e.okLabel})],focusNodeSelector:"input"})}}($||($={}));class M extends a.Widget{constructor(e){if(super(),this.addClass("jp-Input-Dialog"),this._input=document.createElement("input"),this._input.classList.add("jp-mod-styled"),this._input.id="jp-dialog-input-id",void 0!==e.label){const t=document.createElement("label");t.textContent=e.label,t.htmlFor=this._input.id,this.node.appendChild(t)}const t=document.createElement("div");if(t.className="jp-InputDialog-inputWrapper",e.prefix){const n=document.createElement("span");n.className="jp-InputDialog-inputPrefix",n.textContent=e.prefix,n.ariaHidden="true",t.appendChild(n)}if(t.appendChild(this._input),e.suffix){const n=document.createElement("span");n.className="jp-InputDialog-inputSuffix",n.textContent=e.suffix,n.ariaHidden="true",t.appendChild(n)}this.node.appendChild(t)}}class K extends M{constructor(e){super(e),this.addClass("jp-Input-Boolean-Dialog"),this._input.type="checkbox",this._input.checked=!!e.value}getValue(){return this._input.checked}}class j extends M{constructor(e){super(e),this._input.type="number",this._input.value=e.value?e.value.toString():"0"}getValue(){return this._input.value?Number(this._input.value):Number.NaN}}class W extends M{constructor(e){super(e),this._input.value=e.text?e.text:"",e.placeholder&&(this._input.placeholder=e.placeholder),e.pattern&&(this._input.pattern=e.pattern),e.required&&(this._input.required=e.required)}getValue(){return this._input.value}}class z extends W{constructor(e){var t;super(e),this._input.type="text",this._initialSelectionRange=Math.min(this._input.value.length,Math.max(0,null!==(t=e.selectionRange)&&void 0!==t?t:this._input.value.length))}onAfterAttach(e){super.onAfterAttach(e),this._initialSelectionRange>0&&this._input.value&&this._input.setSelectionRange(0,this._initialSelectionRange)}}class G extends W{constructor(e){super(e),this._input.type="password"}onAfterAttach(e){super.onAfterAttach(e),this._input.value&&this._input.select()}}class F extends M{constructor(e){super(e),this._editable=e.editable||!1;let t,n=e.current||0;if("number"==typeof n&&(t=Math.max(0,Math.min(n,e.items.length-1)),n=""),this._list=document.createElement("select"),e.items.forEach(((e,s)=>{const i=document.createElement("option");s===t&&(i.selected=!0,n=e),i.value=e,i.textContent=e,this._list.appendChild(i)})),e.editable){const t=document.createElement("datalist");t.id="input-dialog-items",t.appendChild(this._list),this._input.type="list",this._input.value=n,this._input.setAttribute("list",t.id),e.placeholder&&(this._input.placeholder=e.placeholder),this.node.appendChild(t)}else this._input.parentElement.replaceChild(this._list,this._input)}getValue(){return this._editable?this._input.value:this._list.value}}class H extends M{constructor(e){super(e);let t=e.defaults||[];this._list=document.createElement("select"),this._list.setAttribute("multiple",""),e.items.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,this._list.appendChild(t)})),this._input.remove(),this.node.appendChild(this._list);const n=this._list.options;for(let e=0;e<n.length;e++){const s=n[e];t.includes(s.value)?s.selected=!0:s.selected=!1}}getValue(){let e=[];for(let t of this._list.options)t.selected&&!t.classList.contains("hidden")&&e.push(t.value||t.text);return e}}var U,V=n(6769);!function(e){function t(t){return!("object"!=typeof t||!t)&&e.symbol in t}async function n(e){const t="string"==typeof e,n=function(){const e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-modals allow-same-origin");return e.setAttribute("style","visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;"),e.setAttribute("width","0"),e.setAttribute("height","0"),e}(),i=window.document.body;i.appendChild(n),t?(n.srcdoc=e,await s(n)):(n.src="about:blank",await s(n),function(e,t){e.contentDocument.body.appendChild(t.cloneNode(!0)),e.contentDocument.close()}(n,e));const o=new Promise((e=>{const t=()=>{document.removeEventListener("mousemove",t,!0),document.removeEventListener("mousedown",t,!0),document.removeEventListener("keydown",t,!0),e()};document.addEventListener("mousemove",t,!0),document.addEventListener("mousedown",t,!0),document.addEventListener("keydown",t,!0)}));var r;(r=n.contentWindow).document.execCommand("print",!1)||r.print(),await o,i.removeChild(n)}function s(e){return new Promise((t=>{e.onload=()=>t()}))}e.symbol=Symbol("printable"),e.isPrintable=t,e.getPrintFunction=function(n){return t(n)?n[e.symbol]():null},e.printWidget=function(e){return n(e.node)},e.printURL=async function(e){const t=V.ServerConnection.makeSettings();return n(await(await V.ServerConnection.makeRequest(e,{},t)).text())}}(U||(U={}));const q=!0;class Y extends a.Widget{constructor(e){super(e),this._changeGuard=!1,this._spinner=new o.Spinner,this._isRevealed=!1,this._evtMouseDown=()=>{this.node.contains(document.activeElement)||this._focusContent()},this.addClass("jp-MainAreaWidget"),this.addClass("jp-MainAreaWidget-ContainStrict"),this.id=B.createDomID();const t=(e.translator||r.nullTranslator).load("jupyterlab"),n=this._content=e.content;n.node.setAttribute("role","region"),n.node.setAttribute("aria-label",t.__("notebook content"));const s=this._toolbar=e.toolbar||new o.ReactiveToolbar;s.node.setAttribute("role","toolbar"),s.node.setAttribute("aria-label",t.__("notebook actions"));const i=this._contentHeader=e.contentHeader||new a.BoxPanel({direction:"top-to-bottom",spacing:0}),l=this.layout=new a.BoxLayout({spacing:0});l.direction="top-to-bottom",a.BoxLayout.setStretch(s,0),a.BoxLayout.setStretch(i,0),a.BoxLayout.setStretch(n,1),l.addWidget(s),l.addWidget(i),l.addWidget(n),n.id||(n.id=B.createDomID()),n.node.tabIndex=-1,this._updateTitle(),n.title.changed.connect(this._updateTitle,this),this.title.closable=!0,this.title.changed.connect(this._updateContentTitle,this),e.reveal?(this.node.appendChild(this._spinner.node),this._revealed=e.reveal.then((()=>{if(n.isDisposed)return void this.dispose();n.disposed.connect((()=>this.dispose()));const e=document.activeElement===this._spinner.node;this._disposeSpinner(),this._isRevealed=!0,e&&this._focusContent()})).catch((e=>{const t=new a.Widget;t.addClass("jp-MainAreaWidget-error");const i=document.createElement("pre");throw i.textContent=String(e),t.node.appendChild(i),a.BoxLayout.setStretch(t,1),this._disposeSpinner(),n.dispose(),this._content=null,s.dispose(),this._toolbar=null,l.addWidget(t),this._isRevealed=!0,t}))):(this._spinner.dispose(),this.removeClass("jp-MainAreaWidget-ContainStrict"),n.disposed.connect((()=>this.dispose())),this._isRevealed=!0,this._revealed=Promise.resolve(void 0))}[U.symbol](){return this._content?U.getPrintFunction(this._content):null}get content(){return this._content}get toolbar(){return this._toolbar}get contentHeader(){return this._contentHeader}get isRevealed(){return this._isRevealed}get revealed(){return this._revealed}onActivateRequest(e){this._isRevealed?this._focusContent():this._spinner.node.focus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this._evtMouseDown,q)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this._evtMouseDown,q),super.onBeforeDetach(e)}onCloseRequest(e){this.dispose()}onUpdateRequest(e){this._content&&_.MessageLoop.sendMessage(this._content,e)}_disposeSpinner(){this.node.removeChild(this._spinner.node),this._spinner.dispose(),this.removeClass("jp-MainAreaWidget-ContainStrict")}_updateTitle(){if(this._changeGuard||!this.content)return;this._changeGuard=!0;const e=this.content;this.title.label=e.title.label,this.title.mnemonic=e.title.mnemonic,this.title.icon=e.title.icon,this.title.iconClass=e.title.iconClass,this.title.iconLabel=e.title.iconLabel,this.title.caption=e.title.caption,this.title.className=e.title.className,this.title.dataset=e.title.dataset,this._changeGuard=!1}_updateContentTitle(){if(this._changeGuard||!this.content)return;this._changeGuard=!0;const e=this.content;e.title.label=this.title.label,e.title.mnemonic=this.title.mnemonic,e.title.icon=this.title.icon,e.title.iconClass=this.title.iconClass,e.title.iconLabel=this.title.iconLabel,e.title.caption=this.title.caption,e.title.className=this.title.className,e.title.dataset=this.title.dataset,this._changeGuard=!1}_focusContent(){this.content&&(this.content.node.contains(document.activeElement)||this.content.node.focus(),this.content.activate())}}var X,Z;!function(e){function t(e,t){var s,i;const r=t(e);return r.id=e.id,r.title.label||(r.title.label=null!==(s=e.label)&&void 0!==s?s:c.Text.titleCase(r.id.trim())),e.icon&&(r.title.icon=o.LabIcon.resolve({icon:e.icon})),void 0!==e.mnemonic&&(r.title.mnemonic=e.mnemonic),null===(i=e.items)||void 0===i||i.filter((e=>!e.disabled)).sort(((e,t)=>{var n,s;return(null!==(n=e.rank)&&void 0!==n?n:1/0)-(null!==(s=t.rank)&&void 0!==s?s:1/0)})).map((e=>{n(e,r,t)})),r}function n(e,n,s){const{submenu:i,...o}=e;n.addItem({...o,submenu:i?t(i,s):null})}function s(e,t,i){var o;e.disabled?t.dispose():null===(o=e.items)||void 0===o||o.forEach((e=>{var o,r;const a=null==t?void 0:t.items.find(((t,n)=>{var s,i,o;return t.type===e.type&&t.command===(null!==(s=e.command)&&void 0!==s?s:"")&&(null===(i=t.submenu)||void 0===i?void 0:i.id)===(null===(o=e.submenu)||void 0===o?void 0:o.id)}));if(a&&"separator"!==e.type)if(e.disabled)t.removeItem(a);else switch(null!==(o=e.type)&&void 0!==o?o:"command"){case"command":e.command&&(u.JSONExt.deepEqual(a.args,null!==(r=e.args)&&void 0!==r?r:{})||n(e,t,i));break;case"submenu":e.submenu&&s(e.submenu,a.submenu,i)}else n(e,t,i)}))}e.createMenus=function(e,n){return e.filter((e=>!e.disabled)).sort(((e,t)=>{var n,s;return(null!==(n=e.rank)&&void 0!==n?n:1/0)-(null!==(s=t.rank)&&void 0!==s?s:1/0)})).map((e=>t(e,n)))},e.addContextItem=function(e,n,s){const{submenu:i,...o}=e;n.addItem({...o,submenu:i?t(i,s):null})},e.updateMenus=function(e,n,i){const o=[];return n.forEach((n=>{const r=e.find((e=>e.id===n.id));r?s(n,r,i):n.disabled||o.push(t(n,i))})),e.push(...o),o}}(X||(X={}));class J{constructor(){this._isDisposed=!1,this._queue=[],this._changed=new p.Signal(this)}get changed(){return this._changed}get count(){return this._queue.length}get isDisposed(){return this._isDisposed}get notifications(){return this._queue.slice()}dismiss(e){if(void 0===e){const e=this._queue.slice();this._queue.length=0;for(const t of e)this._changed.emit({type:"removed",notification:t})}else{const t=this._queue.findIndex((t=>t.id===e));if(t>-1){const e=this._queue.splice(t,1)[0];this._changed.emit({type:"removed",notification:e})}}}dispose(){this._isDisposed||(this._isDisposed=!0,p.Signal.clearData(this))}has(e){return this._queue.findIndex((t=>t.id===e))>-1}notify(e,t,n){const s=Date.now(),{progress:i,...o}=n,r=Object.freeze({id:u.UUID.uuid4(),createdAt:s,modifiedAt:s,message:e,type:t,options:{autoClose:0,progress:"number"==typeof i?Math.min(Math.max(0,i),1):i,...o}});return this._queue.unshift(r),this._changed.emit({type:"added",notification:r}),r.id}update(e){const{id:t,message:n,actions:s,autoClose:i,data:o,progress:r,type:a}=e,l="number"==typeof r?Math.min(Math.max(0,r),1):r,d=this._queue.findIndex((e=>e.id===t));if(d>-1){const e=this._queue[d],t=Object.freeze({...e,message:null!=n?n:e.message,type:null!=a?a:e.type,options:{actions:null!=s?s:e.options.actions,autoClose:null!=i?i:e.options.autoClose,data:null!=o?o:e.options.data,progress:null!=l?l:e.options.progress},modifiedAt:Date.now()});return this._queue.splice(d,1),this._queue.unshift(t),this._changed.emit({type:"updated",notification:t}),!0}return!1}}function Q(e){return d().createElement(S.NZ,{tabIndex:0,spacing:4,onClick:e.handleClick,onKeyDown:e.handleKeyDown},d().createElement(S.NZ,{spacing:4},d().createElement(S.pC,{source:e.terminals}),d().createElement(o.terminalIcon.react,{left:"1px",top:"3px",stylesheet:"statusBar"})),d().createElement(S.NZ,{spacing:4},d().createElement(S.pC,{source:e.sessions}),d().createElement(o.kernelIcon.react,{top:"2px",stylesheet:"statusBar"})))}!function(e){e.manager=new J,e.dismiss=function(t){e.manager.dismiss(t)},e.emit=function(t,n="default",s={}){return e.manager.notify(t,n,s)},e.error=function(t,n={}){return e.manager.notify(t,"error",n)},e.info=function(t,n={}){return e.manager.notify(t,"info",n)},e.promise=function(t,n){var s;const{pending:i,error:o,success:r}=n,a=e.manager.notify(i.message,"in-progress",null!==(s=i.options)&&void 0!==s?s:{});return t.then((t=>{var n,s,i;e.manager.update({id:a,message:r.message(t,null===(n=r.options)||void 0===n?void 0:n.data),type:"success",...r.options,data:null!==(i=null===(s=r.options)||void 0===s?void 0:s.data)&&void 0!==i?i:t})})).catch((t=>{var n,s,i;e.manager.update({id:a,message:o.message(t,null===(n=o.options)||void 0===n?void 0:n.data),type:"error",...o.options,data:null!==(i=null===(s=o.options)||void 0===s?void 0:s.data)&&void 0!==i?i:t})})),a},e.success=function(t,n={}){return e.manager.notify(t,"success",n)},e.update=function(t){return e.manager.update(t)},e.warning=function(t,n={}){return e.manager.notify(t,"warning",n)}}(Z||(Z={}));class ee extends o.VDomRenderer{constructor(e){super(new ee.Model),this._serviceManager=e.serviceManager,this._handleClick=e.onClick,this._handleKeyDown=e.onKeyDown,this.translator=e.translator||r.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._serviceManager.sessions.runningChanged.connect(this._onSessionsRunningChanged,this),this._serviceManager.terminals.runningChanged.connect(this._onTerminalsRunningChanged,this),this.addClass("jp-mod-highlighted")}render(){return this.model?(this.title.caption=this._trans.__("%1 Terminals, %2 Kernel sessions",this.model.terminals,this.model.sessions),d().createElement(Q,{sessions:this.model.sessions,terminals:this.model.terminals,handleClick:this._handleClick,handleKeyDown:this._handleKeyDown})):null}dispose(){super.dispose(),this._serviceManager.sessions.runningChanged.disconnect(this._onSessionsRunningChanged,this),this._serviceManager.terminals.runningChanged.disconnect(this._onTerminalsRunningChanged,this)}_onSessionsRunningChanged(e,t){this.model.sessions=t.length}_onTerminalsRunningChanged(e,t){this.model.terminals=t.length}}!function(e){class t extends o.VDomModel{constructor(){super(...arguments),this._terminals=0,this._sessions=0}get sessions(){return this._sessions}set sessions(e){const t=this._sessions;this._sessions=e,t!==this._sessions&&this.stateChanged.emit(void 0)}get terminals(){return this._terminals}set terminals(e){const t=this._terminals;this._terminals=e,t!==this._terminals&&this.stateChanged.emit(void 0)}}e.Model=t}(ee||(ee={}));var te=n(47521),ne=n.n(te);class se{static reg(e){return new RegExp("^"+e+"$","i")}}se.N={integer:"[+-]?[0-9]+",integer_pos:"[+]?[0-9]+",integer_zero_ff:"([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",number:"[+-]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?",number_pos:"[+]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?",number_zero_hundred:"[+]?(([0-9]|[1-9][0-9])([.][0-9]+)?|100)",number_zero_one:"[+]?(1([.][0]+)?|0?([.][0-9]+)?)"},se.B={angle:`(${se.N.number}(deg|rad|grad|turn)|0)`,frequency:`${se.N.number}(Hz|kHz)`,ident:String.raw`-?([_a-z]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*`,len_or_perc:`(0|${se.N.number}(px|em|rem|ex|in|cm|mm|pt|pc|%))`,length:`(${se.N.number}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,length_pos:`(${se.N.number_pos}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,percentage:`${se.N.number}%`,percentage_pos:`${se.N.number_pos}%`,percentage_zero_hundred:`${se.N.number_zero_hundred}%`,string:String.raw`(\"([^\n\r\f\\"]|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\")|(\'([^\n\r\f\\']|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\')`,time:`${se.N.number}(s|ms)`,url:"url\\(.*?\\)",z_index:"[+-]?[0-9]{1,7}"},se.A={absolute_size:"xx-small|x-small|small|medium|large|x-large|xx-large",attachment:"scroll|fixed|local",bg_origin:"border-box|padding-box|content-box",border_style:"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset",box:"border-box|padding-box|content-box",display_inside:"auto|block|table|flex|grid",display_outside:"block-level|inline-level|none|table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption",ending_shape:"circle|ellipse",generic_family:"serif|sans-serif|cursive|fantasy|monospace",generic_voice:"male|female|child",relative_size:"smaller|larger",repeat_style:"repeat-x|repeat-y|((?:repeat|space|round|no-repeat)(?:\\s*(?:repeat|space|round|no-repeat))?)",side_or_corner:"(left|right)?\\s*(top|bottom)?",single_animation_direction:"normal|reverse|alternate|alternate-reverse",single_animation_fill_mode:"none|forwards|backwards|both",single_animation_play_state:"running|paused"},se._COLOR={hex:"\\#(0x)?[0-9a-f]+",name:"aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|transparent|violet|wheat|white|whitesmoke|yellow|yellowgreen",rgb:String.raw`rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)`,rgba:String.raw`rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(${se.N.integer_zero_ff}|${se.N.number_zero_one}|${se.B.percentage_zero_hundred})\s*\)`},se._C={alpha:`${se.N.integer_zero_ff}|${se.N.number_zero_one}|${se.B.percentage_zero_hundred}`,alphavalue:se.N.number_zero_one,bg_position:`((${se.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,bg_size:`(${se.B.length_pos}|${se.B.percentage}|auto){1,2}|cover|contain`,border_width:`thin|medium|thick|${se.B.length}`,bottom:`${se.B.length}|auto`,color:`${se._COLOR.hex}|${se._COLOR.rgb}|${se._COLOR.rgba}|${se._COLOR.name}`,color_stop_length:`(${se.B.len_or_perc}\\s*){1,2}`,linear_color_hint:`${se.B.len_or_perc}`,family_name:`${se.B.string}|(${se.B.ident}\\s*)+`,image_decl:se.B.url,left:`${se.B.length}|auto`,loose_quotable_words:`(${se.B.ident})+`,margin_width:`${se.B.len_or_perc}|auto`,padding_width:`${se.B.length_pos}|${se.B.percentage_pos}`,page_url:se.B.url,position:`((${se.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,right:`${se.B.length}|auto`,shadow:"",size:`closest-side|farthest-side|closest-corner|farthest-corner|${se.B.length}|(${se.B.len_or_perc})\\s+(${se.B.len_or_perc})`,top:`${se.B.length}|auto`},se._C1={image_list:`image\\(\\s*(${se.B.url})*\\s*(${se.B.url}|${se._C.color})\\s*\\)`,linear_color_stop:`(${se._C.color})(\\s*${se._C.color_stop_length})?`,shadow:`((${se._C.color})\\s+((${se.B.length})\\s*){2,4}(s+inset)?)|((inset\\s+)?((${se.B.length})\\s*){2,4}\\s*(${se._C.color})?)`},se._C2={color_stop_list:`((${se._C1.linear_color_stop})(\\s*(${se._C.linear_color_hint}))?\\s*,\\s*)+(${se._C1.linear_color_stop})`,shape:`rect\\(\\s*(${se._C.top})\\s*,\\s*(${se._C.right})\\s*,\\s*(${se._C.bottom})\\s*,\\s*(${se._C.left})\\s*\\)`},se._C3={linear_gradient:`linear-gradient\\((((${se.B.angle})|to\\s+(${se.A.side_or_corner}))\\s*,\\s*)?\\s*(${se._C2.color_stop_list})\\s*\\)`,radial_gradient:`radial-gradient\\(((((${se.A.ending_shape})|(${se._C.size}))\\s*)*\\s*(at\\s+${se._C.position})?\\s*,\\s*)?\\s*(${se._C2.color_stop_list})\\s*\\)`},se._C4={image:`${se.B.url}|${se._C3.linear_gradient}|${se._C3.radial_gradient}|${se._C1.image_list}`,bg_image:`(${se.B.url}|${se._C3.linear_gradient}|${se._C3.radial_gradient}|${se._C1.image_list})|none`},se.C={...se._C,...se._C1,...se._C2,...se._C3,...se._C4},se.AP={border_collapse:"collapse|separate",box:"normal|none|contents",box_sizing:"content-box|padding-box|border-box",caption_side:"top|bottom",clear:"none|left|right|both",direction:"ltr|rtl",empty_cells:"show|hide",float:"left|right|none",font_stretch:"normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",font_style:"normal|italic|oblique",font_variant:"normal|small-caps",font_weight:"normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900",list_style_position:"inside|outside",list_style_type:"disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none",overflow:"visible|hidden|scroll|auto",overflow_wrap:"normal|break-word",overflow_x:"visible|hidden|scroll|auto|no-display|no-content",page_break_after:"auto|always|avoid|left|right",page_break_before:"auto|always|avoid|left|right",page_break_inside:"avoid|auto",position:"static|relative|absolute",resize:"none|both|horizontal|vertical",speak:"normal|none|spell-out",speak_header:"once|always",speak_numeral:"digits|continuous",speak_punctuation:"code|none",table_layout:"auto|fixed",text_align:"left|right|center|justify",text_decoration:"none|((underline|overline|line-through|blink)\\s*)+",text_transform:"capitalize|uppercase|lowercase|none",text_wrap:"normal|unrestricted|none|suppress",unicode_bidi:"normal|embed|bidi-override",visibility:"visible|hidden|collapse",white_space:"normal|pre|nowrap|pre-wrap|pre-line",word_break:"normal|keep-all|break-all"},se._CP={background_attachment:`${se.A.attachment}(,\\s*${se.A.attachment})*`,background_color:se.C.color,background_origin:`${se.A.box}(,\\s*${se.A.box})*`,background_repeat:`${se.A.repeat_style}(,\\s*${se.A.repeat_style})*`,border:`((${se.C.border_width}|${se.A.border_style}|${se.C.color})\\s*){1,3}`,border_radius:`((${se.B.len_or_perc})\\s*){1,4}(\\/\\s*((${se.B.len_or_perc})\\s*){1,4})?`,border_spacing:`${se.B.length}\\s*(${se.B.length})?`,border_top_color:se.C.color,border_top_style:se.A.border_style,border_width:`((${se.C.border_width})\\s*){1,4}`,color:se.C.color,cursor:`(${se.B.url}(\\s*,\\s*)?)*(auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)`,display:`inline|block|list-item|run-in|inline-list-item|inline-block|table|inline-table|table-cell|table-caption|flex|inline-flex|grid|inline-grid|${se.A.display_inside}|${se.A.display_outside}|inherit|inline-box|inline-stack`,display_outside:se.A.display_outside,elevation:`${se.B.angle}|below|level|above|higher|lower`,font_family:`(${se.C.family_name}|${se.A.generic_family})(,\\s*(${se.C.family_name}|${se.A.generic_family}))*`,height:`${se.B.length}|${se.B.percentage}|auto`,letter_spacing:`normal|${se.B.length}`,list_style_image:`${se.C.image}|none`,margin_right:se.C.margin_width,max_height:`${se.B.length_pos}|${se.B.percentage_pos}|none|auto`,min_height:`${se.B.length_pos}|${se.B.percentage_pos}|auto`,opacity:se.C.alphavalue,outline_color:`${se.C.color}|invert`,outline_width:se.C.border_width,padding:`((${se.C.padding_width})\\s*){1,4}`,padding_top:se.C.padding_width,pitch_range:se.N.number,right:`${se.B.length}|${se.B.percentage}|auto`,stress:se.N.number,text_indent:`${se.B.length}|${se.B.percentage}`,text_shadow:`none|${se.C.shadow}(,\\s*(${se.C.shadow}))*`,volume:`${se.N.number_pos}|${se.B.percentage_pos}|silent|x-soft|soft|medium|loud|x-loud`,word_wrap:se.AP.overflow_wrap,zoom:`normal|${se.N.number_pos}|${se.B.percentage_pos}`,backface_visibility:se.AP.visibility,background_clip:`${se.A.box}(,\\s*(${se.A.box}))*`,background_position:`${se.C.bg_position}(,\\s*(${se.C.bg_position}))*`,border_bottom_color:se.C.color,border_bottom_style:se.A.border_style,border_color:`((${se.C.color})\\s*){1,4}`,border_left_color:se.C.color,border_right_color:se.C.color,border_style:`((${se.A.border_style})\\s*){1,4}`,border_top_left_radius:`(${se.B.length}|${se.B.percentage})(\\s*(${se.B.length}|${se.B.percentage}))?`,border_top_width:se.C.border_width,box_shadow:`none|${se.C.shadow}(,\\s*(${se.C.shadow}))*`,clip:`${se.C.shape}|auto`,display_inside:se.A.display_inside,font_size:`${se.A.absolute_size}|${se.A.relative_size}|${se.B.length_pos}|${se.B.percentage_pos}`,line_height:`normal|${se.N.number_pos}|${se.B.length_pos}|${se.B.percentage_pos}`,margin_left:se.C.margin_width,max_width:`${se.B.length_pos}|${se.B.percentage_pos}|none|auto`,outline_style:se.A.border_style,padding_bottom:se.C.padding_width,padding_right:se.C.padding_width,perspective:`none|${se.B.length}`,richness:se.N.number,text_overflow:`((clip|ellipsis|${se.B.string})\\s*){1,2}`,top:`${se.B.length}|${se.B.percentage}|auto`,width:`${se.B.length_pos}|${se.B.percentage_pos}|auto`,z_index:`auto|${se.B.z_index}`,background:`(((${se.C.bg_position}\\s*(\\/\\s*${se.C.bg_size})?)|(${se.A.repeat_style})|(${se.A.attachment})|(${se.A.bg_origin})|(${se.C.bg_image})|(${se.C.color}))\\s*)+`,background_size:`${se.C.bg_size}(,\\s*${se.C.bg_size})*`,border_bottom_left_radius:`(${se.B.length}|${se.B.percentage})(\\s*(${se.B.length}|${se.B.percentage}))?`,border_bottom_width:se.C.border_width,border_left_style:se.A.border_style,border_right_style:se.A.border_style,border_top:`((${se.C.border_width}|${se.A.border_style}|${se.C.color})\\s*){1,3}`,bottom:`${se.B.len_or_perc}|auto`,list_style:`((${se.AP.list_style_type}|${se.AP.list_style_position}|${se.C.image}|none})\\s*){1,3}`,margin_top:se.C.margin_width,outline:`((${se.C.color}|invert|${se.A.border_style}|${se.C.border_width})\\s*){1,3}`,overflow_y:se.AP.overflow_x,pitch:`${se.B.frequency}|x-low|low|medium|high|x-high`,vertical_align:`baseline|sub|super|top|text-top|middle|bottom|text-bottom|${se.B.len_or_perc}`,word_spacing:`normal|${se.B.length}`,background_image:`${se.C.bg_image}(,\\s*${se.C.bg_image})*`,border_bottom_right_radius:`(${se.B.length}|${se.B.percentage})(\\s*(${se.B.length}|${se.B.percentage}))?`,border_left_width:se.C.border_width,border_right_width:se.C.border_width,left:`${se.B.len_or_perc}|auto`,margin_bottom:se.C.margin_width,pause_after:`${se.B.time}|${se.B.percentage}`,speech_rate:`${se.N.number}|x-slow|slow|medium|fast|x-fast|faster|slower`,transition_duration:`${se.B.time}(,\\s*${se.B.time})*`,border_bottom:`((${se.C.border_width}|${se.A.border_style}|${se.C.color})\\s*){1,3}`,border_right:`((${se.C.border_width}|${se.A.border_style}|${se.C.color})\\s*){1,3}`,margin:`((${se.C.margin_width})\\s*){1,4}`,padding_left:se.C.padding_width,border_left:`((${se.C.border_width}|${se.A.border_style}|${se.C.color})\\s*){1,3}`,quotes:`(${se.B.string}\\s*${se.B.string})+|none`,border_top_right_radius:`(${se.B.length}|${se.B.percentage})(\\s*(${se.B.length}|${se.B.percentage}))?`,min_width:`${se.B.length_pos}|${se.B.percentage_pos}|auto`},se._CP1={font:`(((((${se.AP.font_style}|${se.AP.font_variant}|${se.AP.font_weight})\\s*){1,3})?\\s*(${se._CP.font_size})\\s*(\\/\\s*(${se._CP.line_height}))?\\s+(${se._CP.font_family}))|caption|icon|menu|message-box|small-caption|status-bar)`},se.CP={...se._CP,...se._CP1},se.BORDER_COLLAPSE=se.reg(se.AP.border_collapse),se.BOX=se.reg(se.AP.box),se.BOX_SIZING=se.reg(se.AP.box_sizing),se.CAPTION_SIDE=se.reg(se.AP.caption_side),se.CLEAR=se.reg(se.AP.clear),se.DIRECTION=se.reg(se.AP.direction),se.EMPTY_CELLS=se.reg(se.AP.empty_cells),se.FLOAT=se.reg(se.AP.float),se.FONT_STRETCH=se.reg(se.AP.font_stretch),se.FONT_STYLE=se.reg(se.AP.font_style),se.FONT_VARIANT=se.reg(se.AP.font_variant),se.FONT_WEIGHT=se.reg(se.AP.font_weight),se.LIST_STYLE_POSITION=se.reg(se.AP.list_style_position),se.LIST_STYLE_TYPE=se.reg(se.AP.list_style_type),se.OVERFLOW=se.reg(se.AP.overflow),se.OVERFLOW_WRAP=se.reg(se.AP.overflow_wrap),se.OVERFLOW_X=se.reg(se.AP.overflow_x),se.PAGE_BREAK_AFTER=se.reg(se.AP.page_break_after),se.PAGE_BREAK_BEFORE=se.reg(se.AP.page_break_before),se.PAGE_BREAK_INSIDE=se.reg(se.AP.page_break_inside),se.POSITION=se.reg(se.AP.position),se.RESIZE=se.reg(se.AP.resize),se.SPEAK=se.reg(se.AP.speak),se.SPEAK_HEADER=se.reg(se.AP.speak_header),se.SPEAK_NUMERAL=se.reg(se.AP.speak_numeral),se.SPEAK_PUNCTUATION=se.reg(se.AP.speak_punctuation),se.TABLE_LAYOUT=se.reg(se.AP.table_layout),se.TEXT_ALIGN=se.reg(se.AP.text_align),se.TEXT_DECORATION=se.reg(se.AP.text_decoration),se.TEXT_TRANSFORM=se.reg(se.AP.text_transform),se.TEXT_WRAP=se.reg(se.AP.text_wrap),se.UNICODE_BIDI=se.reg(se.AP.unicode_bidi),se.VISIBILITY=se.reg(se.AP.visibility),se.WHITE_SPACE=se.reg(se.AP.white_space),se.WORD_BREAK=se.reg(se.AP.word_break),se.BACKGROUND_ATTACHMENT=se.reg(se.CP.background_attachment),se.BACKGROUND_COLOR=se.reg(se.CP.background_color),se.BACKGROUND_ORIGIN=se.reg(se.CP.background_origin),se.BACKGROUND_REPEAT=se.reg(se.CP.background_repeat),se.BORDER=se.reg(se.CP.border),se.BORDER_RADIUS=se.reg(se.CP.border_radius),se.BORDER_SPACING=se.reg(se.CP.border_spacing),se.BORDER_TOP_COLOR=se.reg(se.CP.border_top_color),se.BORDER_TOP_STYLE=se.reg(se.CP.border_top_style),se.BORDER_WIDTH=se.reg(se.CP.border_width),se.COLOR=se.reg(se.CP.color),se.CURSOR=se.reg(se.CP.cursor),se.DISPLAY=se.reg(se.CP.display),se.DISPLAY_OUTSIDE=se.reg(se.CP.display_outside),se.ELEVATION=se.reg(se.CP.elevation),se.FONT_FAMILY=se.reg(se.CP.font_family),se.HEIGHT=se.reg(se.CP.height),se.LETTER_SPACING=se.reg(se.CP.letter_spacing),se.LIST_STYLE_IMAGE=se.reg(se.CP.list_style_image),se.MARGIN_RIGHT=se.reg(se.CP.margin_right),se.MAX_HEIGHT=se.reg(se.CP.max_height),se.MIN_HEIGHT=se.reg(se.CP.min_height),se.OPACITY=se.reg(se.CP.opacity),se.OUTLINE_COLOR=se.reg(se.CP.outline_color),se.OUTLINE_WIDTH=se.reg(se.CP.outline_width),se.PADDING=se.reg(se.CP.padding),se.PADDING_TOP=se.reg(se.CP.padding_top),se.PITCH_RANGE=se.reg(se.CP.pitch_range),se.RIGHT=se.reg(se.CP.right),se.STRESS=se.reg(se.CP.stress),se.TEXT_INDENT=se.reg(se.CP.text_indent),se.TEXT_SHADOW=se.reg(se.CP.text_shadow),se.VOLUME=se.reg(se.CP.volume),se.WORD_WRAP=se.reg(se.CP.word_wrap),se.ZOOM=se.reg(se.CP.zoom),se.BACKFACE_VISIBILITY=se.reg(se.CP.backface_visibility),se.BACKGROUND_CLIP=se.reg(se.CP.background_clip),se.BACKGROUND_POSITION=se.reg(se.CP.background_position),se.BORDER_BOTTOM_COLOR=se.reg(se.CP.border_bottom_color),se.BORDER_BOTTOM_STYLE=se.reg(se.CP.border_bottom_style),se.BORDER_COLOR=se.reg(se.CP.border_color),se.BORDER_LEFT_COLOR=se.reg(se.CP.border_left_color),se.BORDER_RIGHT_COLOR=se.reg(se.CP.border_right_color),se.BORDER_STYLE=se.reg(se.CP.border_style),se.BORDER_TOP_LEFT_RADIUS=se.reg(se.CP.border_top_left_radius),se.BORDER_TOP_WIDTH=se.reg(se.CP.border_top_width),se.BOX_SHADOW=se.reg(se.CP.box_shadow),se.CLIP=se.reg(se.CP.clip),se.DISPLAY_INSIDE=se.reg(se.CP.display_inside),se.FONT_SIZE=se.reg(se.CP.font_size),se.LINE_HEIGHT=se.reg(se.CP.line_height),se.MARGIN_LEFT=se.reg(se.CP.margin_left),se.MAX_WIDTH=se.reg(se.CP.max_width),se.OUTLINE_STYLE=se.reg(se.CP.outline_style),se.PADDING_BOTTOM=se.reg(se.CP.padding_bottom),se.PADDING_RIGHT=se.reg(se.CP.padding_right),se.PERSPECTIVE=se.reg(se.CP.perspective),se.RICHNESS=se.reg(se.CP.richness),se.TEXT_OVERFLOW=se.reg(se.CP.text_overflow),se.TOP=se.reg(se.CP.top),se.WIDTH=se.reg(se.CP.width),se.Z_INDEX=se.reg(se.CP.z_index),se.BACKGROUND=se.reg(se.CP.background),se.BACKGROUND_SIZE=se.reg(se.CP.background_size),se.BORDER_BOTTOM_LEFT_RADIUS=se.reg(se.CP.border_bottom_left_radius),se.BORDER_BOTTOM_WIDTH=se.reg(se.CP.border_bottom_width),se.BORDER_LEFT_STYLE=se.reg(se.CP.border_left_style),se.BORDER_RIGHT_STYLE=se.reg(se.CP.border_right_style),se.BORDER_TOP=se.reg(se.CP.border_top),se.BOTTOM=se.reg(se.CP.bottom),se.LIST_STYLE=se.reg(se.CP.list_style),se.MARGIN_TOP=se.reg(se.CP.margin_top),se.OUTLINE=se.reg(se.CP.outline),se.OVERFLOW_Y=se.reg(se.CP.overflow_y),se.PITCH=se.reg(se.CP.pitch),se.VERTICAL_ALIGN=se.reg(se.CP.vertical_align),se.WORD_SPACING=se.reg(se.CP.word_spacing),se.BACKGROUND_IMAGE=se.reg(se.CP.background_image),se.BORDER_BOTTOM_RIGHT_RADIUS=se.reg(se.CP.border_bottom_right_radius),se.BORDER_LEFT_WIDTH=se.reg(se.CP.border_left_width),se.BORDER_RIGHT_WIDTH=se.reg(se.CP.border_right_width),se.LEFT=se.reg(se.CP.left),se.MARGIN_BOTTOM=se.reg(se.CP.margin_bottom),se.PAUSE_AFTER=se.reg(se.CP.pause_after),se.SPEECH_RATE=se.reg(se.CP.speech_rate),se.TRANSITION_DURATION=se.reg(se.CP.transition_duration),se.BORDER_BOTTOM=se.reg(se.CP.border_bottom),se.BORDER_RIGHT=se.reg(se.CP.border_right),se.MARGIN=se.reg(se.CP.margin),se.PADDING_LEFT=se.reg(se.CP.padding_left),se.BORDER_LEFT=se.reg(se.CP.border_left),se.FONT=se.reg(se.CP.font),se.QUOTES=se.reg(se.CP.quotes),se.BORDER_TOP_RIGHT_RADIUS=se.reg(se.CP.border_top_right_radius),se.MIN_WIDTH=se.reg(se.CP.min_width);class ie{constructor(){this._autolink=!0,this._options={allowedTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","colspan","command","data","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rowspan","s","samp","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],allowedAttributes:{"*":["class","dir","draggable","hidden","id","inert","itemprop","itemref","itemscope","lang","spellcheck","style","title","translate"],a:["accesskey","coords","href","hreflang","name","rel","shape","tabindex","target","type"],area:["accesskey","alt","coords","href","nohref","shape","tabindex"],audio:["autoplay","controls","loop","mediagroup","muted","preload","src"],bdo:["dir"],blockquote:["cite"],br:["clear"],button:["accesskey","data-commandlinker-args","data-commandlinker-command","disabled","name","tabindex","type","value"],canvas:["height","width"],caption:["align"],col:["align","char","charoff","span","valign","width"],colgroup:["align","char","charoff","span","valign","width"],command:["checked","command","disabled","icon","label","radiogroup","type"],data:["value"],del:["cite","datetime"],details:["open"],dir:["compact"],div:["align"],dl:["compact"],fieldset:["disabled"],font:["color","face","size"],form:["accept","autocomplete","enctype","method","name","novalidate"],h1:["align"],h2:["align"],h3:["align"],h4:["align"],h5:["align"],h6:["align"],hr:["align","noshade","size","width"],iframe:["align","frameborder","height","marginheight","marginwidth","width"],img:["align","alt","border","height","hspace","ismap","name","src","usemap","vspace","width"],input:["accept","accesskey","align","alt","autocomplete","checked","disabled","inputmode","ismap","list","max","maxlength","min","multiple","name","placeholder","readonly","required","size","src","step","tabindex","type","usemap","value"],ins:["cite","datetime"],label:["accesskey","for"],legend:["accesskey","align"],li:["type","value"],map:["name"],menu:["compact","label","type"],meter:["high","low","max","min","value"],ol:["compact","reversed","start","type"],optgroup:["disabled","label"],option:["disabled","label","selected","value"],output:["for","name"],p:["align"],pre:["width"],progress:["max","min","value"],q:["cite"],select:["autocomplete","disabled","multiple","name","required","size","tabindex"],source:["type"],table:["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"],tbody:["align","char","charoff","valign"],td:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],textarea:["accesskey","autocomplete","cols","disabled","inputmode","name","placeholder","readonly","required","rows","tabindex","wrap"],tfoot:["align","char","charoff","valign"],th:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],thead:["align","char","charoff","valign"],tr:["align","bgcolor","char","charoff","valign"],track:["default","kind","label","srclang"],ul:["compact","type"],video:["autoplay","controls","height","loop","mediagroup","muted","poster","preload","src","width"]},allowedStyles:{"*":{"backface-visibility":[se.BACKFACE_VISIBILITY],background:[se.BACKGROUND],"background-attachment":[se.BACKGROUND_ATTACHMENT],"background-clip":[se.BACKGROUND_CLIP],"background-color":[se.BACKGROUND_COLOR],"background-image":[se.BACKGROUND_IMAGE],"background-origin":[se.BACKGROUND_ORIGIN],"background-position":[se.BACKGROUND_POSITION],"background-repeat":[se.BACKGROUND_REPEAT],"background-size":[se.BACKGROUND_SIZE],border:[se.BORDER],"border-bottom":[se.BORDER_BOTTOM],"border-bottom-color":[se.BORDER_BOTTOM_COLOR],"border-bottom-left-radius":[se.BORDER_BOTTOM_LEFT_RADIUS],"border-bottom-right-radius":[se.BORDER_BOTTOM_RIGHT_RADIUS],"border-bottom-style":[se.BORDER_BOTTOM_STYLE],"border-bottom-width":[se.BORDER_BOTTOM_WIDTH],"border-collapse":[se.BORDER_COLLAPSE],"border-color":[se.BORDER_COLOR],"border-left":[se.BORDER_LEFT],"border-left-color":[se.BORDER_LEFT_COLOR],"border-left-style":[se.BORDER_LEFT_STYLE],"border-left-width":[se.BORDER_LEFT_WIDTH],"border-radius":[se.BORDER_RADIUS],"border-right":[se.BORDER_RIGHT],"border-right-color":[se.BORDER_RIGHT_COLOR],"border-right-style":[se.BORDER_RIGHT_STYLE],"border-right-width":[se.BORDER_RIGHT_WIDTH],"border-spacing":[se.BORDER_SPACING],"border-style":[se.BORDER_STYLE],"border-top":[se.BORDER_TOP],"border-top-color":[se.BORDER_TOP_COLOR],"border-top-left-radius":[se.BORDER_TOP_LEFT_RADIUS],"border-top-right-radius":[se.BORDER_TOP_RIGHT_RADIUS],"border-top-style":[se.BORDER_TOP_STYLE],"border-top-width":[se.BORDER_TOP_WIDTH],"border-width":[se.BORDER_WIDTH],bottom:[se.BOTTOM],box:[se.BOX],"box-shadow":[se.BOX_SHADOW],"box-sizing":[se.BOX_SIZING],"caption-side":[se.CAPTION_SIDE],clear:[se.CLEAR],clip:[se.CLIP],color:[se.COLOR],cursor:[se.CURSOR],direction:[se.DIRECTION],display:[se.DISPLAY],"display-inside":[se.DISPLAY_INSIDE],"display-outside":[se.DISPLAY_OUTSIDE],elevation:[se.ELEVATION],"empty-cells":[se.EMPTY_CELLS],float:[se.FLOAT],font:[se.FONT],"font-family":[se.FONT_FAMILY],"font-size":[se.FONT_SIZE],"font-stretch":[se.FONT_STRETCH],"font-style":[se.FONT_STYLE],"font-variant":[se.FONT_VARIANT],"font-weight":[se.FONT_WEIGHT],height:[se.HEIGHT],left:[se.LEFT],"letter-spacing":[se.LETTER_SPACING],"line-height":[se.LINE_HEIGHT],"list-style":[se.LIST_STYLE],"list-style-image":[se.LIST_STYLE_IMAGE],"list-style-position":[se.LIST_STYLE_POSITION],"list-style-type":[se.LIST_STYLE_TYPE],margin:[se.MARGIN],"margin-bottom":[se.MARGIN_BOTTOM],"margin-left":[se.MARGIN_LEFT],"margin-right":[se.MARGIN_RIGHT],"margin-top":[se.MARGIN_TOP],"max-height":[se.MAX_HEIGHT],"max-width":[se.MAX_WIDTH],"min-height":[se.MIN_HEIGHT],"min-width":[se.MIN_WIDTH],opacity:[se.OPACITY],outline:[se.OUTLINE],"outline-color":[se.OUTLINE_COLOR],"outline-style":[se.OUTLINE_STYLE],"outline-width":[se.OUTLINE_WIDTH],overflow:[se.OVERFLOW],"overflow-wrap":[se.OVERFLOW_WRAP],"overflow-x":[se.OVERFLOW_X],"overflow-y":[se.OVERFLOW_Y],padding:[se.PADDING],"padding-bottom":[se.PADDING_BOTTOM],"padding-left":[se.PADDING_LEFT],"padding-right":[se.PADDING_RIGHT],"padding-top":[se.PADDING_TOP],"page-break-after":[se.PAGE_BREAK_AFTER],"page-break-before":[se.PAGE_BREAK_BEFORE],"page-break-inside":[se.PAGE_BREAK_INSIDE],"pause-after":[se.PAUSE_AFTER],perspective:[se.PERSPECTIVE],pitch:[se.PITCH],"pitch-range":[se.PITCH_RANGE],position:[se.POSITION],quotes:[se.QUOTES],resize:[se.RESIZE],richness:[se.RICHNESS],right:[se.RIGHT],speak:[se.SPEAK],"speak-header":[se.SPEAK_HEADER],"speak-numeral":[se.SPEAK_NUMERAL],"speak-punctuation":[se.SPEAK_PUNCTUATION],"speech-rate":[se.SPEECH_RATE],stress:[se.STRESS],"table-layout":[se.TABLE_LAYOUT],"text-align":[se.TEXT_ALIGN],"text-decoration":[se.TEXT_DECORATION],"text-indent":[se.TEXT_INDENT],"text-overflow":[se.TEXT_OVERFLOW],"text-shadow":[se.TEXT_SHADOW],"text-transform":[se.TEXT_TRANSFORM],"text-wrap":[se.TEXT_WRAP],top:[se.TOP],"unicode-bidi":[se.UNICODE_BIDI],"vertical-align":[se.VERTICAL_ALIGN],visibility:[se.VISIBILITY],volume:[se.VOLUME],"white-space":[se.WHITE_SPACE],width:[se.WIDTH],"word-break":[se.WORD_BREAK],"word-spacing":[se.WORD_SPACING],"word-wrap":[se.WORD_WRAP],"z-index":[se.Z_INDEX],zoom:[se.ZOOM]}},transformTags:{a:ne().simpleTransform("a",{rel:"nofollow"}),input:ne().simpleTransform("input",{disabled:"disabled"})},allowedSchemes:[...ne().defaults.allowedSchemes],allowedSchemesByTag:{img:ne().defaults.allowedSchemes.concat(["attachment"])},allowedSchemesAppliedToAttributes:["href","cite"]}}sanitize(e,t){return ne()(e,{...this._options,...t||{}})}getAutolink(){return this._autolink}setAllowedSchemes(e){this._options.allowedSchemes=[...e]}setAutolink(e){this._autolink=e}}class oe{constructor(){this._commands=new Array}get ids(){return this._commands.map((e=>e.id))}add(e){if(this._commands.map((e=>e.id)).includes(e.id))throw Error(`Command ${e.id} is already defined.`);this._commands.push({isEnabled:()=>!0,rank:oe.DEFAULT_RANK,...e})}getActiveCommandId(e){var t;return(null!==(t=this._commands.filter((t=>t.isEnabled(e))).sort(((e,t)=>e.rank-t.rank||(e.id<t.id?-1:1)))[0])&&void 0!==t?t:{id:null}).id}remove(e){const t=this._commands.findIndex((t=>t.id===e));t>=0&&this._commands.splice(t,1)}}oe.DEFAULT_RANK=500;var re,ae=n(49711);class le{constructor(e){this._current=null,this._links=[],this._overrides={},this._overrideProps={},this._outstanding=null,this._pending=0,this._requests={},this._themes={},this._themeChanged=new p.Signal(this);const{host:t,key:n,splash:s,url:i}=e;this.translator=e.translator||r.nullTranslator,this._trans=this.translator.load("jupyterlab");const o=e.settings;this._base=i,this._host=t,this._splash=s||null,o.load(n).then((e=>{this._settings=e,this._initOverrideProps(),this._settings.changed.connect(this._loadSettings,this),this._loadSettings()}))}get theme(){return this._current}get preferredLightTheme(){return this._settings.composite["preferred-light-theme"]}get preferredDarkTheme(){return this._settings.composite["preferred-dark-theme"]}get preferredTheme(){return this.isToggledAdaptiveTheme()?this.isSystemColorSchemeDark()?this.preferredDarkTheme:this.preferredLightTheme:this.theme}get themes(){return Object.keys(this._themes)}get lightThemes(){return Object.entries(this._themes).filter((([e,t])=>t.isLight)).map((([e,t])=>e))}get darkThemes(){return Object.entries(this._themes).filter((([e,t])=>!t.isLight)).map((([e,t])=>e))}get themeChanged(){return this._themeChanged}isSystemColorSchemeDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}getCSS(e){var t;return null!==(t=this._overrides[e])&&void 0!==t?t:getComputedStyle(document.documentElement).getPropertyValue(`--jp-${e}`)}loadCSS(e){const t=this._base,n=c.URLExt.isLocal(e)?c.URLExt.join(t,e):e,s=this._links;return new Promise(((e,t)=>{const i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",n),i.addEventListener("load",(()=>{e(void 0)})),i.addEventListener("error",(()=>{t(`Stylesheet failed to load: ${n}`)})),document.body.appendChild(i),s.push(i),this.loadCSSOverrides()}))}loadCSSOverrides(){var e;const t=null!==(e=this._settings.user.overrides)&&void 0!==e?e:{};Object.keys({...this._overrides,...t}).forEach((e=>{const n=t[e];n&&this.validateCSS(e,n)?document.documentElement.style.setProperty(`--jp-${e}`,n):(delete t[e],document.documentElement.style.removeProperty(`--jp-${e}`))})),this._overrides=t}validateCSS(e,t){const n=this._overrideProps[e];return n?!!CSS.supports(n,t)||(console.warn(`CSS validation failed: invalid value.\nkey: '${e}', val: '${t}', prop: '${n}'`),!1):(console.warn(`CSS validation failed: could not find property corresponding to key.\nkey: '${e}', val: '${t}'`),!1)}register(e){const{name:t}=e,n=this._themes;if(n[t])throw new Error(`Theme already registered for ${t}`);return n[t]=e,new ae.DisposableDelegate((()=>{delete n[t]}))}setCSSOverride(e,t){return this._settings.set("overrides",{...this._overrides,[e]:t})}setTheme(e){return this._settings.set("theme",e)}setPreferredLightTheme(e){return this._settings.set("preferred-light-theme",e)}setPreferredDarkTheme(e){return this._settings.set("preferred-dark-theme",e)}isLight(e){return this._themes[e].isLight}incrFontSize(e){return this._incrFontSize(e,!0)}decrFontSize(e){return this._incrFontSize(e,!1)}themeScrollbars(e){return!!this._settings.composite["theme-scrollbars"]&&!!this._themes[e].themeScrollbars}isToggledThemeScrollbars(){return!!this._settings.composite["theme-scrollbars"]}toggleThemeScrollbars(){return this._settings.set("theme-scrollbars",!this._settings.composite["theme-scrollbars"])}isToggledAdaptiveTheme(){return!!this._settings.composite["adaptive-theme"]}toggleAdaptiveTheme(){return this._settings.set("adaptive-theme",!this._settings.composite["adaptive-theme"])}getDisplayName(e){var t,n;return null!==(n=null===(t=this._themes[e])||void 0===t?void 0:t.displayName)&&void 0!==n?n:e}_incrFontSize(e,t=!0){var n;const s=(null!==(n=this.getCSS(e))&&void 0!==n?n:"13px").split(/([a-zA-Z]+)/),i=(t?1:-1)*("em"===s[1]?.1:1);return this.setCSSOverride(e,`${Number(s[0])+i}${s[1]}`)}_initOverrideProps(){const e=this._settings.schema.definitions.cssOverrides.properties;Object.keys(e).forEach((t=>{let n;switch(t){case"code-font-size":case"content-font-size1":case"ui-font-size1":n="font-size";break;default:n=e[t].description}this._overrideProps[t]=n}))}_loadSettings(){const e=this._outstanding,t=this._pending,n=this._requests;t&&(window.clearTimeout(t),this._pending=0);const s=this._settings,i=this._themes;let o=s.composite.theme;if(this.isToggledAdaptiveTheme()&&(o=this.isSystemColorSchemeDark()?this.preferredDarkTheme:this.preferredLightTheme),e)return e.then((()=>{this._loadSettings()})).catch((()=>{this._loadSettings()})),void(this._outstanding=null);if(n[o]=n[o]?n[o]+1:1,i[o])return this._outstanding=this._loadTheme(o),void delete n[o];if(n[o]>20){const e=s.default("theme");return delete n[o],i[e]?(console.warn(`Could not load theme ${o}, using default ${e}.`),void(this._outstanding=this._loadTheme(e))):void this._onError(this._trans.__("Neither theme %1 nor default %2 loaded.",o,e))}this._pending=window.setTimeout((()=>{this._loadSettings()}),75)}_loadTheme(e){var t;const n=this._current,s=this._links,i=this._themes,o=this._splash?this._splash.show(i[e].isLight):new ae.DisposableDelegate((()=>{}));s.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)})),s.length=0;const r=null===(t=this._settings.schema.properties)||void 0===t?void 0:t.theme;r&&(r.enum=Object.keys(i).map((e=>{var t;return null!==(t=i[e].displayName)&&void 0!==t?t:e})));const a=n?i[n].unload():Promise.resolve();return Promise.all([a,i[e].load()]).then((()=>{this._current=e,this._themeChanged.emit({name:"theme",oldValue:n,newValue:e}),this._host.hide(),requestAnimationFrame((()=>{this._host.show(),re.fitAll(this._host),o.dispose()}))})).catch((e=>{this._onError(e),o.dispose()}))}_onError(e){f({title:this._trans.__("Error Loading Theme"),body:String(e),buttons:[v.okButton({label:this._trans.__("OK")})]})}}!function(e){e.fitAll=function e(t){for(const n of t.children())e(n);t.fit()}}(re||(re={}));const de=new u.Token("@jupyterlab/apputils:ICommandPalette","A service for the application command palette\n  in the left panel. Use this to add commands to the palette."),ce=new u.Token("@jupyterlab/apputils:IKernelStatusModel","A service to register kernel session provider to the kernel status indicator."),he=new u.Token("@jupyterlab/apputils:ISessionContextDialogs","A service for handling the session dialogs."),ue=new u.Token("@jupyterlab/apputils:IThemeManager","A service for the theme manager for the application. This is used primarily in theme extensions to register new themes."),pe=new u.Token("@jupyterlab/apputils:ISanitizer","A service for sanitizing HTML strings."),_e=new u.Token("@jupyterlab/apputils:ISplashScreen","A service for the splash screen for the application.\n  Use this if you want to show the splash screen for your own purposes."),ge=new u.Token("@jupyterlab/apputils:IWindowResolver","A service for a window resolver for the\n  application. JupyterLab workspaces are given a name, which are determined using\n  the window resolver. Require this if you want to use the name of the current workspace."),me=new u.Token("@jupyterlab/apputils:IToolbarWidgetRegistry","A registry for toolbar widgets. Require this\n  if you want to build the toolbar dynamically from a data definition (stored in settings for example).");class fe{constructor(e){this._widgets=new Map,this._factoryAdded=new p.Signal(this),this._defaultFactory=e.defaultFactory}get defaultFactory(){return this._defaultFactory}set defaultFactory(e){this._defaultFactory=e}get factoryAdded(){return this._factoryAdded}createWidget(e,t,n){var s;const i=null===(s=this._widgets.get(e))||void 0===s?void 0:s.get(n.name);return i?i(t):this._defaultFactory(e,t,n)}addFactory(e,t,n){let s=this._widgets.get(e);const i=null==s?void 0:s.get(t);return s||(s=new Map,this._widgets.set(e,s)),s.set(t,n),this._factoryAdded.emit(t),i}registerFactory(e,t,n){return this.addFactory(e,t,n)}}function be(e){return(t,n,s)=>{var i;switch(null!==(i=s.type)&&void 0!==i?i:"command"){case"command":{const{command:t,args:n,label:i,caption:r,icon:a}=s,l=null!=t?t:"",d={toolbar:!0,...n},c=a?o.LabIcon.resolve({icon:a}):void 0,h=(null!=c?c:e.icon(l,d))?null!=i?i:"":i;return new o.CommandToolbarButton({commands:e,id:l,args:d,icon:c,label:h,caption:r})}case"spacer":return o.Toolbar.createSpacerItem();default:return new a.Widget}}}var ve=n(17158),ye=n(54968);const we=50,Ce="jupyter.lab.toolbars";function Ee(e,t,n,s,i,o="toolbar"){const r=new ve.y({itemCmp:(e,t)=>u.JSONExt.deepEqual(e,t)});return async function(e,t,n,s,i,o="toolbar"){var r;const a=i.load("jupyterlab");let l=null,d={},c=!0;try{function _(e){var i,r;d={};const a=Object.keys(t.plugins).filter((e=>e!==s)).map((e=>{var s,i;const o=null!==(i=(null!==(s=t.plugins[e].schema[Ce])&&void 0!==s?s:{})[n])&&void 0!==i?i:[];return d[e]=o,o})).concat([null!==(r=(null!==(i=e[Ce])&&void 0!==i?i:{})[n])&&void 0!==r?r:[]]).reduceRight(((e,t)=>ye.SettingRegistry.reconcileToolbarItems(e,t,!0)),[]);e.properties[o].default=ye.SettingRegistry.reconcileToolbarItems(a,e.properties[o].default,!0).sort(((e,t)=>{var n,s;return(null!==(n=e.rank)&&void 0!==n?n:we)-(null!==(s=t.rank)&&void 0!==s?s:we)}))}t.transform(s,{compose:e=>{var t,n,s,i,r;l||(l=u.JSONExt.deepCopy(e.schema),_(l));const a=null!==(s=(null!==(n=(null!==(t=l.properties)&&void 0!==t?t:{})[o])&&void 0!==n?n:{}).default)&&void 0!==s?s:[],d=e.data.user,c=e.data.composite;return d[o]=null!==(i=e.data.user[o])&&void 0!==i?i:[],c[o]=(null!==(r=ye.SettingRegistry.reconcileToolbarItems(a,d[o],!1))&&void 0!==r?r:[]).sort(((e,t)=>{var n,s;return(null!==(n=e.rank)&&void 0!==n?n:we)-(null!==(s=t.rank)&&void 0!==s?s:we)})),e.data={composite:c,user:d},e},fetch:e=>(l||(l=u.JSONExt.deepCopy(e.schema),_(l)),{data:e.data,id:e.id,raw:e.raw,schema:l,version:e.version})})}catch(g){if("TransformError"!==g.name)throw g;c=!1}const h=await t.load(s);h.changed.connect((()=>{var e;const t=null!==(e=h.composite[o])&&void 0!==e?e:[];p(t)}));const p=t=>{e.clear(),e.pushAll(t.filter((e=>!e.disabled)))};p(null!==(r=h.composite[o])&&void 0!==r?r:[]),c&&t.pluginChanged.connect((async(e,i)=>{var o,r,c;if(i===s)return;const h=null!==(o=d[i])&&void 0!==o?o:[],p=null!==(c=(null!==(r=t.plugins[i].schema[Ce])&&void 0!==r?r:{})[n])&&void 0!==c?c:[];u.JSONExt.deepEqual(h,p)||(d[i]?await async function(e){(await f({title:e.__("Information"),body:e.__("Toolbar customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[v.cancelButton(),v.okButton({label:e.__("Reload")})]})).button.accept&&location.reload()}(a):p.length>0&&(l=null,t.plugins[s].schema.properties.toolbar.default=[],await t.load(s,!0)))}))}(r,t,n,s,i,o).catch((e=>{console.error(`Failed to load toolbar items for factory ${n} from ${s}`,e)})),t=>{const s=(s,i)=>{switch(i.type){case"move":o.move(i.oldIndex,i.newIndex);break;case"add":i.newValues.forEach((s=>o.push({name:s.name,widget:e.createWidget(n,t,s)})));break;case"remove":i.oldValues.forEach((()=>o.remove(i.oldIndex)));break;case"set":i.newValues.forEach((s=>o.set(i.newIndex,{name:s.name,widget:e.createWidget(n,t,s)})))}},i=(s,i)=>{const a=Array.from(r).findIndex((e=>e.name===i));a>=0&&o.set(a,{name:i,widget:e.createWidget(n,t,r.get(a))})},o=new ve.y({values:Array.from(r).map((s=>({name:s.name,widget:e.createWidget(n,t,s)})))});return e.factoryAdded.connect(i),r.changed.connect(s),t.disposed.connect((()=>{r.changed.disconnect(s),e.factoryAdded.disconnect(i)})),o}}function Te(e,t,n){var s;if(!e.toolbar&&!n)return void console.log(`Widget ${e.id} has no 'toolbar' and no explicit toolbar was provided.`);const i=null!==(s=e.toolbar)&&void 0!==s?s:n,o=t(e);if(Array.isArray(o))o.forEach((({name:e,widget:t})=>{i.addItem(e,t)}));else{const t=(e,t)=>{switch(t.type){case"add":t.newValues.forEach(((e,n)=>{i.insertItem(t.newIndex+n,e.name,e.widget)}));break;case"move":t.oldValues.forEach((e=>{e.widget.parent=null})),t.newValues.forEach(((e,n)=>{i.insertItem(t.newIndex+n,e.name,e.widget)}));break;case"remove":t.oldValues.forEach((e=>{e.widget.parent=null}));break;case"set":t.oldValues.forEach((e=>{e.widget.parent=null})),t.newValues.forEach(((e,n)=>{const s=(0,h.findIndex)(i.names(),(t=>e.name===t));s>=0&&(Array.from(i.children())[s].parent=null),i.insertItem(t.newIndex+n,e.name,e.widget)}))}};t(o,{newIndex:0,newValues:Array.from(o),oldIndex:0,oldValues:[],type:"add"}),o.changed.connect(t),e.disposed.connect((()=>{o.changed.disconnect(t)}))}}class ke{get name(){return this._name}resolve(e){return Se.resolve(e).then((e=>{this._name=e}))}}var Se;!function(e){const t="@jupyterlab/statedb:StateDB",n=`${t}:beacon`,s=Math.floor(200+300*Math.random()),i=`${t}:window`;let o=null,r=null;const a=new u.PromiseDelegate,l={};let d=null,c=!1;function h(e){if(null===e)return;const{localStorage:t}=window;t.setItem(i,`${e}-${(new Date).getTime()}`)}function p(){c=!0,o=null,a.reject(`Window name candidate "${r}" already exists`)}e.resolve=function(e){if(c)return a.promise;if(r=e,r in l)return p(),a.promise;const{localStorage:t,setTimeout:i}=window;return i((()=>{if(!c){if(!r||r in l)return p();c=!0,o=null,a.resolve(d=r),h(d)}}),s),o=`${Math.random()}-${(new Date).getTime()}`,t.setItem(n,o),a.promise},window.addEventListener("storage",(e=>{const{key:t,newValue:s}=e;if(null===s)return;if(t===n&&s!==o&&null!==r)return void h(c?d:r);if(c||t!==i)return;const a=s.replace(/\-\d+$/,"");l[a]=null,r&&!(r in l)||p()}))}(Se||(Se={}));class Ae extends o.Toolbar{}!function(e){e.createInterruptButton=C.createInterruptButton,e.createKernelNameItem=C.createKernelNameItem,e.createKernelStatusItem=C.createKernelStatusItem,e.createRestartButton=C.createRestartButton,e.createSpacerItem=o.Toolbar.createSpacerItem}(Ae||(Ae={}))},17158:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var s,i=n(45945),o=n(30427);class r{constructor(e={}){if(this._array=[],this._isDisposed=!1,this._changed=new o.Signal(this),e.values)for(const t of e.values)this._array.push(t);this._itemCmp=e.itemCmp||s.itemCmp}get type(){return"List"}get changed(){return this._changed}get length(){return this._array.length}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,o.Signal.clearData(this),this.clear())}[Symbol.iterator](){return this._array[Symbol.iterator]()}get(e){return this._array[e]}set(e,t){const n=this._array[e];if(void 0===t)throw new Error("Cannot set an undefined item");(0,this._itemCmp)(n,t)||(this._array[e]=t,this._changed.emit({type:"set",oldIndex:e,newIndex:e,oldValues:[n],newValues:[t]}))}push(e){const t=this._array.push(e);return this._changed.emit({type:"add",oldIndex:-1,newIndex:this.length-1,oldValues:[],newValues:[e]}),t}insert(e,t){e===this._array.length?this._array.push(t):i.ArrayExt.insert(this._array,e,t),this._changed.emit({type:"add",oldIndex:-2,newIndex:e,oldValues:[],newValues:[t]})}removeValue(e){const t=this._itemCmp,n=i.ArrayExt.findFirstIndex(this._array,(n=>t(n,e)));return this.remove(n),n}remove(e){const t=i.ArrayExt.removeAt(this._array,e);if(void 0!==t)return this._changed.emit({type:"remove",oldIndex:e,newIndex:-1,newValues:[],oldValues:[t]}),t}clear(){const e=this._array.slice();this._array.length=0,this._changed.emit({type:"remove",oldIndex:0,newIndex:0,newValues:[],oldValues:e})}move(e,t){if(this.length<=1||e===t)return;const n=[this._array[e]];i.ArrayExt.move(this._array,e,t),this._changed.emit({type:"move",oldIndex:e,newIndex:t,oldValues:n,newValues:n})}pushAll(e){const t=this.length;for(const t of e)this._array.push(t);return this._changed.emit({type:"add",oldIndex:-1,newIndex:t,oldValues:[],newValues:Array.from(e)}),this.length}insertAll(e,t){const n=e;for(const n of t)i.ArrayExt.insert(this._array,e++,n);this._changed.emit({type:"add",oldIndex:-2,newIndex:n,oldValues:[],newValues:Array.from(t)})}removeRange(e,t){const n=this._array.slice(e,t);for(let n=e;n<t;n++)i.ArrayExt.removeAt(this._array,e);return this._changed.emit({type:"remove",oldIndex:e,newIndex:-1,oldValues:n,newValues:[]}),this.length}}!function(e){e.itemCmp=function(e,t){return e===t}}(s||(s={}))},41205:(e,t,n)=>{"use strict";n.d(t,{NZ:()=>o,$O:()=>p,a3:()=>u,pC:()=>h,yp:()=>d});var s=n(59407),i=n.n(s);function o(e){const{spacing:t,children:n,className:i,...o}=e,r=s.Children.count(n);return s.createElement("div",{className:`jp-StatusBar-GroupItem ${i||""}`,...o},s.Children.map(n,((e,n)=>0===n?s.createElement("div",{style:{marginRight:`${t}px`}},e):n===r-1?s.createElement("div",{style:{marginLeft:`${t}px`}},e):s.createElement("div",{style:{margin:`0px ${t}px`}},e))))}var r,a=n(15388),l=n(80281);function d(e){const t=new c(e);return e.startHidden||t.launch(),t}class c extends l.Widget{constructor(e){super(),this._body=e.body,this._body.addClass("jp-StatusBar-HoverItem"),this._anchor=e.anchor,this._align=e.align,e.hasDynamicSize&&(this._observer=new ResizeObserver((()=>{this.update()}))),(this.layout=new l.PanelLayout).addWidget(e.body),this._body.node.addEventListener("resize",(()=>{this.update()}))}launch(){this._setGeometry(),l.Widget.attach(this,document.body),this.update(),this._anchor.addClass("jp-mod-clicked"),this._anchor.removeClass("jp-mod-highlight")}onUpdateRequest(e){this._setGeometry(),super.onUpdateRequest(e)}onAfterAttach(e){var t;document.addEventListener("click",this,!1),this.node.addEventListener("keydown",this,!1),window.addEventListener("resize",this,!1),null===(t=this._observer)||void 0===t||t.observe(this._body.node)}onBeforeDetach(e){var t;null===(t=this._observer)||void 0===t||t.disconnect(),document.removeEventListener("click",this,!1),this.node.removeEventListener("keydown",this,!1),window.removeEventListener("resize",this,!1)}onResize(){this.update()}dispose(){var e;null===(e=this._observer)||void 0===e||e.disconnect(),super.dispose(),this._anchor.removeClass("jp-mod-clicked"),this._anchor.addClass("jp-mod-highlight")}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"click":this._evtClick(e);break;case"resize":this.onResize()}}_evtClick(e){!e.target||this._body.node.contains(e.target)||this._anchor.node.contains(e.target)||this.dispose()}_evtKeydown(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.dispose())}_setGeometry(){let e=0;const t=this._anchor.node.getBoundingClientRect(),n=this._body.node.getBoundingClientRect();"right"===this._align&&(e=-(n.width-t.width));const s=window.getComputedStyle(this._body.node);a.HoverBox.setGeometry({anchor:t,host:document.body,maxHeight:500,minHeight:20,node:this._body.node,offset:{horizontal:e},privilege:"forceAbove",style:s})}}function h(e){const{title:t,source:n,className:i,...o}=e;return s.createElement("span",{className:`jp-StatusBar-TextItem ${i}`,title:t,...o},n)}function u(e){return i().createElement("div",{className:"jp-Statusbar-ProgressCircle",role:"progressbar","aria-label":e.label||"Unlabelled progress circle","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.progress},i().createElement("svg",{viewBox:"0 0 250 250"},i().createElement("circle",{cx:"125",cy:"125",r:"104",stroke:"var(--jp-inverse-layout-color3)",strokeWidth:"20",fill:"none"}),i().createElement("path",{className:"jp-Statusbar-ProgressCirclePath",transform:"translate(125,125) scale(.9)",d:(e=>{const t=Math.max(3.6*e,.1),n=t*Math.PI/180,s=104*Math.sin(n),i=-104*Math.cos(n);return"M 0 0 v -104 A 104 104 1 "+(t<180?1:0)+" 0 "+s.toFixed(4)+" "+i.toFixed(4)+" z"})(e.progress),fill:"var(--jp-inverse-layout-color3)"})))}n(45945),n(49711),l.Widget,function(e){e.statusItemDefaults={align:"left",rank:0,priority:0,isActive:()=>!0,activeStateChanged:void 0}}(r||(r={}));const p=new(n(68211).Token)("@jupyterlab/statusbar:IStatusBar","A service for the status bar on the application. Use this if you want to add new status bar items.")},47521:(e,t,n)=>{const s=n(15482),i=n(72189),{isPlainObject:o}=n(70993),r=n(52743),a=n(8287),{parse:l}=n(39274),d=["img","audio","video","picture","svg","object","map","iframe","embed"],c=["script","style"];function h(e,t){e&&Object.keys(e).forEach((function(n){t(e[n],n)}))}function u(e,t){return{}.hasOwnProperty.call(e,t)}function p(e,t){const n=[];return h(e,(function(e){t(e)&&n.push(e)})),n}e.exports=g;const _=/^[^\0\t\n\f\r /<=>]+$/;function g(e,t,n){if(null==e)return"";"number"==typeof e&&(e=e.toString());let f="",b="";function v(e,t){const n=this;this.tag=e,this.attribs=t||{},this.tagPosition=f.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){x.length&&(x[x.length-1].text+=n.text)},this.updateParentNodeMediaChildren=function(){x.length&&d.includes(this.tag)&&x[x.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},g.defaults,t)).parser=Object.assign({},m,t.parser);const y=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};c.forEach((function(e){y(e)&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const w=t.nonTextTags||["script","style","textarea","option"];let C,E;t.allowedAttributes&&(C={},E={},h(t.allowedAttributes,(function(e,t){C[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(i(e).replace(/\\\*/g,".*")):C[t].push(e)})),n.length&&(E[t]=new RegExp("^("+n.join("|")+")$"))})));const T={},k={},S={};h(t.allowedClasses,(function(e,t){if(C&&(u(C,t)||(C[t]=[]),C[t].push("class")),T[t]=e,Array.isArray(e)){const n=[];T[t]=[],S[t]=[],e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(i(e).replace(/\\\*/g,".*")):e instanceof RegExp?S[t].push(e):T[t].push(e)})),n.length&&(k[t]=new RegExp("^("+n.join("|")+")$"))}}));const A={};let R,I,x,P,D,O,N;h(t.transformTags,(function(e,t){let n;"function"==typeof e?n=e:"string"==typeof e&&(n=g.simpleTransform(e)),"*"===t?R=n:A[t]=n}));let B=!1;L();const $=new s.Parser({onopentag:function(e,n){if(t.enforceHtmlBoundary&&"html"===e&&L(),O)return void N++;const s=new v(e,n);x.push(s);let i=!1;const d=!!s.text;let c;if(u(A,e)&&(c=A[e](e,n),s.attribs=n=c.attribs,void 0!==c.text&&(s.innerText=c.text),e!==c.tagName&&(s.name=e=c.tagName,D[I]=c.tagName)),R&&(c=R(e,n),s.attribs=n=c.attribs,e!==c.tagName&&(s.name=e=c.tagName,D[I]=c.tagName)),(!y(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(u(e,t))return!1;return!0}(P)||null!=t.nestingLimit&&I>=t.nestingLimit)&&(i=!0,P[I]=!0,"discard"===t.disallowedTagsMode&&-1!==w.indexOf(e)&&(O=!0,N=1),P[I]=!0),I++,i){if("discard"===t.disallowedTagsMode)return;b=f,f=""}f+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(s.innerText=""),(!C||u(C,e)||C["*"])&&h(n,(function(n,i){if(!_.test(i))return void delete s.attribs[i];if(""===n&&!t.allowedEmptyAttributes.includes(i)&&(t.nonBooleanAttributes.includes(i)||t.nonBooleanAttributes.includes("*")))return void delete s.attribs[i];let d=!1;if(!C||u(C,e)&&-1!==C[e].indexOf(i)||C["*"]&&-1!==C["*"].indexOf(i)||u(E,e)&&E[e].test(i)||E["*"]&&E["*"].test(i))d=!0;else if(C&&C[e])for(const t of C[e])if(o(t)&&t.name&&t.name===i){d=!0;let e="";if(!0===t.multiple){const s=n.split(" ");for(const n of s)-1!==t.values.indexOf(n)&&(""===e?e=n:e+=" "+n)}else t.values.indexOf(n)>=0&&(e=n);n=e}if(d){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(i)&&K(e,n))return void delete s.attribs[i];if("script"===e&&"src"===i){let e=!0;try{const s=j(n);if(t.allowedScriptHostnames||t.allowedScriptDomains){const n=(t.allowedScriptHostnames||[]).find((function(e){return e===s.url.hostname})),i=(t.allowedScriptDomains||[]).find((function(e){return s.url.hostname===e||s.url.hostname.endsWith(`.${e}`)}));e=n||i}}catch(t){e=!1}if(!e)return void delete s.attribs[i]}if("iframe"===e&&"src"===i){let e=!0;try{const s=j(n);if(s.isRelativeUrl)e=u(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const n=(t.allowedIframeHostnames||[]).find((function(e){return e===s.url.hostname})),i=(t.allowedIframeDomains||[]).find((function(e){return s.url.hostname===e||s.url.hostname.endsWith(`.${e}`)}));e=n||i}}catch(t){e=!1}if(!e)return void delete s.attribs[i]}if("srcset"===i)try{let e=a(n);if(e.forEach((function(e){K("srcset",e.url)&&(e.evil=!0)})),e=p(e,(function(e){return!e.evil})),!e.length)return void delete s.attribs[i];n=p(e,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),s.attribs[i]=n}catch(e){return void delete s.attribs[i]}if("class"===i){const t=T[e],o=T["*"],a=k[e],l=S[e],d=[a,k["*"]].concat(l).filter((function(e){return e}));if(!(c=n,h=t&&o?r(t,o):t||o,g=d,n=h?(c=c.split(/\s+/)).filter((function(e){return-1!==h.indexOf(e)||g.some((function(t){return t.test(e)}))})).join(" "):c).length)return void delete s.attribs[i]}if("style"===i)if(t.parseStyleAttributes)try{if(n=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e}),[]).join(";")}(function(e,t){if(!t)return e;const n=e.nodes[0];let s;return s=t[n.selector]&&t["*"]?r(t[n.selector],t["*"]):t[n.selector]||t["*"],s&&(e.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,n){return u(e,n.prop)&&e[n.prop].some((function(e){return e.test(n.value)}))&&t.push(n),t}}(s),[])),e}(l(e+" {"+n+"}",{map:!1}),t.allowedStyles)),0===n.length)return void delete s.attribs[i]}catch(t){return"undefined"!=typeof window&&console.warn('Failed to parse "'+e+" {"+n+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),void delete s.attribs[i]}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");f+=" "+i,n&&n.length?f+='="'+M(n,!0)+'"':t.allowedEmptyAttributes.includes(i)&&(f+='=""')}else delete s.attribs[i];var c,h,g})),-1!==t.selfClosing.indexOf(e)?f+=" />":(f+=">",!s.innerText||d||t.textFilter||(f+=M(s.innerText),B=!0)),i&&(f=b+M(f),b="")},ontext:function(e){if(O)return;const n=x[x.length-1];let s;if(n&&(s=n.tag,e=void 0!==n.innerText?n.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==s&&"style"!==s){const n=M(e,!1);t.textFilter&&!B?f+=t.textFilter(n,s):B||(f+=n)}else f+=e;x.length&&(x[x.length-1].text+=e)},onclosetag:function(e,n){if(O){if(N--,N)return;O=!1}const s=x.pop();if(!s)return;if(s.tag!==e)return void x.push(s);O=!!t.enforceHtmlBoundary&&"html"===e,I--;const i=P[I];if(i){if(delete P[I],"discard"===t.disallowedTagsMode)return void s.updateParentNodeText();b=f,f=""}D[I]&&(e=D[I],delete D[I]),t.exclusiveFilter&&t.exclusiveFilter(s)?f=f.substr(0,s.tagPosition):(s.updateParentNodeMediaChildren(),s.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||n&&!y(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0?i&&(f=b,b=""):(f+="</"+e+">",i&&(f=b+M(f),b=""),B=!1))}},t.parser);return $.write(e),$.end(),f;function L(){f="",I=0,x=[],P={},D={},O=!1,N=0}function M(e,n){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;")),e}function K(e,n){for(n=n.replace(/[\x00-\x20]+/g,"");;){const e=n.indexOf("\x3c!--");if(-1===e)break;const t=n.indexOf("--\x3e",e+4);if(-1===t)break;n=n.substring(0,e)+n.substring(t+3)}const s=n.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!s)return!!n.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const i=s[1].toLowerCase();return u(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(i):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(i)}function j(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;const n=new URL(e,t);return{isRelativeUrl:n&&"relative-site"===n.hostname&&"relative:"===n.protocol,url:n}}}const m={decodeEntities:!0};g.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},g.simpleTransform=function(e,t,n){return n=void 0===n||n,t=t||{},function(s,i){let o;if(n)for(o in t)i[o]=t[o];else i=t;return{tagName:e,attribs:i}}}}}]);