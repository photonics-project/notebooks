(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[9530],{49530:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BaseSettings:()=>g,DefaultSchemaValidator:()=>f,ISettingRegistry:()=>v,SettingRegistry:()=>y,Settings:()=>b});var n=i(47079),r=i(68211),s=i(49711),o=i(30427),a=i(11601),d=i.n(a),c=i(88696),l=i(60006),u=i.n(l);const p=r.JSONExt.deepCopy,h={strict:!1},m=String.fromCharCode(30);class f{constructor(){this._composer=new(d())({useDefaults:!0,...h}),this._validator=new(d())({...h}),this._composer.addSchema(u(),"jupyterlab-plugin-schema"),this._validator.addSchema(u(),"jupyterlab-plugin-schema")}validateData(e,t=!0){const i=this._validator.getSchema(e.id),n=this._composer.getSchema(e.id);if(!i||!n)return"object"!==e.schema.type?[{instancePath:"type",keyword:"schema",schemaPath:"",message:`Setting registry schemas' root-level type must be 'object', rejecting type: ${e.schema.type}`}]:this._addSchema(e.id,e.schema)||this.validateData(e);let r;try{r=c.parse(e.raw)}catch(e){if(e instanceof SyntaxError)return[{instancePath:"",keyword:"syntax",schemaPath:"",message:e.message}];const{column:t,description:i}=e;return[{instancePath:"",keyword:"parse",schemaPath:"",message:`${i} (line ${e.lineNumber} column ${t})`}]}if(!i(r))return i.errors;const s=p(r);return n(s)?(t&&(e.data={composite:s,user:r}),null):n.errors}_addSchema(e,t){const i=this._composer,n=this._validator,r=n.getSchema("jupyterlab-plugin-schema");return r(t)?n.validateSchema(t)?(i.removeSchema(e),n.removeSchema(e),i.addSchema(t,e),n.addSchema(t,e),null):n.errors:r.errors}}class y{constructor(e){this.schema=u(),this.plugins=Object.create(null),this._pluginChanged=new o.Signal(this),this._ready=Promise.resolve(),this._transformers=Object.create(null),this._unloadedPlugins=new Map,this.connector=e.connector,this.validator=e.validator||new f,e.plugins&&(e.plugins.filter((e=>e.schema["jupyter.lab.transform"])).forEach((e=>this._unloadedPlugins.set(e.id,e))),this._ready=this._preload(e.plugins))}get pluginChanged(){return this._pluginChanged}async get(e,t){await this._ready;const i=this.plugins;if(e in i){const{composite:n,user:r}=i[e].data;return{composite:void 0!==n[t]?p(n[t]):void 0,user:void 0!==r[t]?p(r[t]):void 0}}return this.load(e).then((()=>this.get(e,t)))}async load(e,t=!1){await this._ready;const i=this.plugins;return e in i?(t&&(i[e].data={composite:{},user:{}},await this._load(await this._transform("fetch",i[e])),this._pluginChanged.emit(e)),new b({plugin:i[e],registry:this})):this._unloadedPlugins.has(e)&&e in this._transformers&&(await this._load(await this._transform("fetch",this._unloadedPlugins.get(e))),e in i)?(this._pluginChanged.emit(e),this._unloadedPlugins.delete(e),new b({plugin:i[e],registry:this})):this.reload(e)}async reload(e){await this._ready;const t=await this.connector.fetch(e),i=this.plugins;if(void 0===t)throw[{instancePath:"",keyword:"id",message:`Could not fetch settings for ${e}.`,schemaPath:""}];return await this._load(await this._transform("fetch",t)),this._pluginChanged.emit(e),new b({plugin:i[e],registry:this})}async remove(e,t){await this._ready;const i=this.plugins;if(!(e in i))return;const n=c.parse(i[e].raw);return delete n[t],delete n[`// ${t}`],i[e].raw=w.annotatedPlugin(i[e],n),this._save(e)}async set(e,t,i){await this._ready;const n=this.plugins;if(!(e in n))return this.load(e).then((()=>this.set(e,t,i)));const r=c.parse(n[e].raw);return n[e].raw=w.annotatedPlugin(n[e],{...r,[t]:i}),this._save(e)}transform(e,t){const i=this._transformers;if(e in i){const t=new Error(`${e} already has a transformer.`);throw t.name="TransformError",t}return i[e]={fetch:t.fetch||(e=>e),compose:t.compose||(e=>e)},new s.DisposableDelegate((()=>{delete i[e]}))}async upload(e,t){await this._ready;const i=this.plugins;return e in i?(i[e].raw=t,this._save(e)):this.load(e).then((()=>this.upload(e,t)))}get ready(){return this._ready}async _load(e){const t=e.id;try{await this._validate(e)}catch(e){const i=[`Validating ${t} failed:`];throw e.forEach(((e,t)=>{const{instancePath:n,schemaPath:r,keyword:s,message:o}=e;(n||r)&&i.push(`${t} - schema @ ${r}, data @ ${n}`),i.push(`{${s}} ${o}`)})),console.warn(i.join("\n")),e}}async _preload(e){await Promise.all(e.map((async e=>{var t;try{await this._load(await this._transform("fetch",e))}catch(e){"unset"!==(null===(t=e[0])||void 0===t?void 0:t.keyword)&&console.warn("Ignored setting registry preload errors.",e)}})))}async _save(e){const t=this.plugins;if(!(e in t))throw new Error(`${e} does not exist in setting registry.`);try{await this._validate(t[e])}catch(t){throw console.warn(`${e} validation errors:`,t),new Error(`${e} failed to validate; check console.`)}await this.connector.save(e,t[e].raw);const i=await this.connector.fetch(e);if(void 0===i)throw[{instancePath:"",keyword:"id",message:`Could not fetch settings for ${e}.`,schemaPath:""}];await this._load(await this._transform("fetch",i)),this._pluginChanged.emit(e)}async _transform(e,t){const i=t.id,n=this._transformers;if(!t.schema["jupyter.lab.transform"])return t;if(i in n){const r=n[i][e].call(null,t);if(r.id!==i)throw[{instancePath:"",keyword:"id",message:"Plugin transformations cannot change plugin IDs.",schemaPath:""}];return r}throw[{instancePath:"",keyword:"unset",message:`${t.id} has no transformers yet.`,schemaPath:""}]}async _validate(e){const t=this.validator.validateData(e);if(t)throw t;this.plugins[e.id]=await this._transform("compose",e)}}class g{constructor(e){this._schema=e.schema}get schema(){return this._schema}isDefault(e){for(const t in this.schema.properties){const i=e[t],n=this.default(t);if(void 0!==i&&void 0!==n&&!r.JSONExt.deepEqual(i,r.JSONExt.emptyObject)&&!r.JSONExt.deepEqual(i,r.JSONExt.emptyArray)&&!r.JSONExt.deepEqual(i,n))return!1}return!0}default(e){return w.reifyDefault(this.schema,e)}}class b extends g{constructor(e){super({schema:e.plugin.schema}),this._changed=new o.Signal(this),this._isDisposed=!1,this.id=e.plugin.id,this.registry=e.registry,this.registry.pluginChanged.connect(this._onPluginChanged,this)}get changed(){return this._changed}get composite(){return this.plugin.data.composite}get isDisposed(){return this._isDisposed}get plugin(){return this.registry.plugins[this.id]}get raw(){return this.plugin.raw}get isModified(){return!this.isDefault(this.user)}get user(){return this.plugin.data.user}get version(){return this.plugin.version}annotatedDefaults(){return w.annotatedDefaults(this.schema,this.id)}dispose(){this._isDisposed||(this._isDisposed=!0,o.Signal.clearData(this))}get(e){const{composite:t,user:i}=this;return{composite:void 0!==t[e]?p(t[e]):void 0,user:void 0!==i[e]?p(i[e]):void 0}}remove(e){return this.registry.remove(this.plugin.id,e)}save(e){return this.registry.upload(this.plugin.id,e)}set(e,t){return this.registry.set(this.plugin.id,e,t)}validate(e){const{id:t,schema:i}=this.plugin,n=this.registry.validator,r=this.version;return n.validateData({data:{composite:{},user:{}},id:t,raw:e,schema:i,version:r},!1)}_onPluginChanged(e,t){t===this.plugin.id&&this._changed.emit(void 0)}}var w;!function(e){function t(e,t,n=!1,s=!0){if(!e)return t&&s?r.JSONExt.deepCopy(t):[];if(!t)return r.JSONExt.deepCopy(e);const o=r.JSONExt.deepCopy(e);return t.forEach((e=>{const t=o.findIndex((t=>t.id===e.id));t>=0?o[t]={...o[t],...e,items:i(o[t].items,e.items,n,s)}:s&&o.push(e)})),o}function i(e,i,n=!1,s=!0){if(!e)return i?r.JSONExt.deepCopy(i):void 0;if(!i)return r.JSONExt.deepCopy(e);const o=r.JSONExt.deepCopy(e);return i.forEach((e=>{var i;switch(null!==(i=e.type)&&void 0!==i?i:"command"){case"separator":s&&o.push({...e});break;case"submenu":if(e.submenu){const i=o.findIndex((t=>{var i,n;return"submenu"===t.type&&(null===(i=t.submenu)||void 0===i?void 0:i.id)===(null===(n=e.submenu)||void 0===n?void 0:n.id)}));i<0?s&&o.push(r.JSONExt.deepCopy(e)):o[i]={...o[i],...e,submenu:t(o[i].submenu?[o[i].submenu]:null,[e.submenu],n,s)[0]}}break;case"command":if(e.command){const t=o.findIndex((t=>{var i,n;return t.command===e.command&&t.selector===e.selector&&r.JSONExt.deepEqual(null!==(i=t.args)&&void 0!==i?i:{},null!==(n=e.args)&&void 0!==n?n:{})}));t<0?s&&o.push({...e}):(n&&console.warn(`Menu entry for command '${e.command}' is duplicated.`),o[t]={...o[t],...e})}}})),o}e.reconcileMenus=t,e.reconcileItems=i,e.filterDisabledItems=function e(t){return t.reduce(((t,i)=>{var n;const r={...i};if(!r.disabled){if("submenu"===r.type){const{submenu:t}=r;t&&!t.disabled&&(r.submenu={...t,items:e(null!==(n=t.items)&&void 0!==n?n:[])})}t.push(r)}return t}),[])},e.reconcileShortcuts=function(e,t){const i={};return t=[...t.filter((e=>!!e.disabled)),...t.filter((e=>!e.disabled))].filter((e=>{const t=n.CommandRegistry.normalizeKeys(e).join(m);if(!t)return console.warn("Skipping this shortcut because there are no actionable keys on this platform",e),!1;t in i||(i[t]={});const{disabled:r,selector:s}=e;return s in i[t]?null===i[t][s].enabledUserShortcut?r?(i[t][s].shouldDisableDefaultShortcut=!0,!1):(i[t][s].enabledUserShortcut=e,!0):(console.warn("Skipping",e,"shortcut because it collides with another enabled shortcut:",i[t][s].enabledUserShortcut),!1):(i[t][s]={enabledUserShortcut:r?null:e,enabledDefaultShortcut:null,shouldDisableDefaultShortcut:!!r},!r)})),e=[...e.filter((e=>!!e.disabled)),...e.filter((e=>!e.disabled))].filter((e=>{const t=n.CommandRegistry.normalizeKeys(e).join(m);if(!t)return!1;t in i||(i[t]={});const{disabled:r,selector:s}=e;return s in i[t]?null===i[t][s].enabledDefaultShortcut?r?(i[t][s].shouldDisableDefaultShortcut=!0,!1):!i[t][s].shouldDisableDefaultShortcut&&(i[t][s].enabledDefaultShortcut=e,!0):(i[t][s].shouldDisableDefaultShortcut||console.warn("Skipping",e,"default shortcut because it collides with another enabled default shortcut:",i[t][s].enabledDefaultShortcut),!1):(i[t][s]={enabledUserShortcut:null,enabledDefaultShortcut:r?null:e,shouldDisableDefaultShortcut:!!r},!r)})),w.upgradeShortcuts(t.concat(e).filter((e=>!e.disabled)).map((e=>({args:{},...e}))))},e.reconcileToolbarItems=function(e,t,i=!1){if(!e)return t?r.JSONExt.deepCopy(t):void 0;if(!t)return r.JSONExt.deepCopy(e);const n=r.JSONExt.deepCopy(e);return t.forEach((e=>{const t=n.findIndex((t=>t.name===e.name));t<0?n.push({...e}):(i&&r.JSONExt.deepEqual(Object.keys(e),Object.keys(n[t]))&&console.warn(`Toolbar item '${e.name}' is duplicated.`),n[t]={...n[t],...e})})),n}}(y||(y={})),function(e){const t="    ",i="[missing schema description]",n="[missing schema title]";function s(e){return e.reduce(((t,i,n)=>{const r=i.split("\n");return t+i+(0===r[r.length-1].trim().indexOf("//")||n===e.length-1?"":",")+(n===e.length-1?"":"\n\n")}),"")}function o(e,i=`${t}// `){return i+e.split("\n").join(`\n${i}`)}function a(e,t,i,n){var s,o,d,c,l,u,p;if(i=null!=i?i:e.definitions,n=t?e.required instanceof Array&&(null===(s=e.required)||void 0===s?void 0:s.includes(t)):n,"object"===(e=(t?null===(o=e.properties)||void 0===o?void 0:o[t]:e)||{}).type){const t=r.JSONExt.deepCopy(e.default),n=e.properties||{};for(const r in n)t[r]=a(n[r],void 0,i,e.required instanceof Array&&(null===(d=e.required)||void 0===d?void 0:d.includes(r)));return t}if("array"===e.type){const t=void 0!==e.default;if(!t&&!n)return;const s=t?r.JSONExt.deepCopy(e.default):[];let o=e.items||{};if(o.$ref&&i){const e=o.$ref.replace("#/definitions/","");o=null!==(c=i[e])&&void 0!==c?c:{}}for(const e in s)if("object"===o.type){const t=null!==(u=null!==(l=a(o,void 0,i))&&void 0!==l?l:s[e])&&void 0!==u?u:{};for(const i in t)(null===(p=s[e])||void 0===p?void 0:p[i])&&(t[i]=s[e][i]);s[e]=t}return s}return e.default}e.annotatedDefaults=function(e,r){const{description:d,properties:c,title:l}=e,u=c?Object.keys(c).sort(((e,t)=>e.localeCompare(t))):[],p=Math.max((d||i).length,r.length);return["{",o(`${l||n}`),o(r),o(d||i),o("*".repeat(p)),"",s(u.map((n=>function(e,n){const r=e.properties&&e.properties[n]||{},s=r.type,d=r.description||i,c=r.title||"",l=a(e,n),u=void 0!==l?o(`"${n}": ${JSON.stringify(l,null,4)}`,t):o(`"${n}": ${s}`);return[o(c),o(d),u].filter((e=>e.length)).join("\n")}(e,n)))),"}"].join("\n")},e.annotatedPlugin=function(e,r){const{description:a,title:d}=e.schema,c=Object.keys(r).sort(((e,t)=>e.localeCompare(t))),l=Math.max((a||i).length,e.id.length);return["{",o(`${d||n}`),o(e.id),o(a||i),o("*".repeat(l)),"",s(c.map((s=>function(e,r,s){const a=e.properties&&e.properties[r],d=a&&a.description||i,c=a&&a.title||n,l=o(`"${r}": ${JSON.stringify(s,null,4)}`,t);return[o(c),o(d),l].join("\n")}(e.schema,s,r[s])))),"}"].join("\n")},e.reifyDefault=a;const d=new Set;e.upgradeShortcuts=function(e){const t=new Set,i=[{old:".jp-Notebook:focus.jp-mod-commandMode",new:".jp-Notebook.jp-mod-commandMode:not(.jp-mod-readWrite) :focus",versionDeprecated:"JupyterLab 4.1"},{old:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",new:".jp-Notebook.jp-mod-commandMode:not(.jp-mod-readWrite) :focus",versionDeprecated:"JupyterLab 4.1.1"},{old:".jp-Notebook:focus",new:".jp-Notebook.jp-mod-commandMode:not(.jp-mod-readWrite) :focus",versionDeprecated:"JupyterLab 4.1"},{old:"[data-jp-traversable]:focus",new:".jp-Notebook.jp-mod-commandMode:not(.jp-mod-readWrite) :focus",versionDeprecated:"JupyterLab 4.1"},{old:"[data-jp-kernel-user]:focus",new:"[data-jp-kernel-user]:not(.jp-mod-readWrite) :focus:not(:read-write)",versionDeprecated:"JupyterLab 4.1"},{old:"[data-jp-kernel-user] :focus:not(:read-write)",new:"[data-jp-kernel-user]:not(.jp-mod-readWrite) :focus:not(:read-write)",versionDeprecated:"JupyterLab 4.1.1"}],n=e.map((e=>{const n=e.selector;let r=n;for(const e of i)n.includes(e.old)&&(r=n.replace(e.old,e.new),d.has(n)||(t.add(`"${e.old}" was replaced with "${e.new}" in ${e.versionDeprecated} (present in "${n}")`),d.add(n)));return e.selector=r,e}));return t.size>0&&console.warn("Deprecated shortcut selectors: "+[...t].join("\n")+"\n\nThe selectors will be substituted transparently this time, but need to be updated at source before next major release."),n}}(w||(w={}));const v=new r.Token("@jupyterlab/coreutils:ISettingRegistry",'A service for the JupyterLab settings system.\n  Use this if you want to store settings for your application.\n  See "schemaDir" for more information.')},60006:e=>{e.exports={$schema:"http://json-schema.org/draft-07/schema",title:"JupyterLab Plugin Settings/Preferences Schema",description:"JupyterLab plugin settings/preferences schema",version:"1.0.0",type:"object",additionalProperties:!0,properties:{"jupyter.lab.internationalization":{type:"object",properties:{selectors:{type:"array",items:{type:"string",minLength:1}},domain:{type:"string",minLength:1}}},"jupyter.lab.menus":{type:"object",properties:{main:{title:"Main menu entries",description:"List of menu items to add to the main menubar.",items:{$ref:"#/definitions/menu"},type:"array",default:[]},context:{title:"The application context menu.",description:"List of context menu items.",items:{allOf:[{$ref:"#/definitions/menuItem"},{properties:{selector:{description:"The CSS selector for the context menu item.",type:"string"}}}]},type:"array",default:[]}},additionalProperties:!1},"jupyter.lab.metadataforms":{items:{$ref:"#/definitions/metadataForm"},type:"array",default:[]},"jupyter.lab.setting-deprecated":{type:"boolean",default:!1},"jupyter.lab.setting-icon":{type:"string",default:""},"jupyter.lab.setting-icon-class":{type:"string",default:""},"jupyter.lab.setting-icon-label":{type:"string",default:"Plugin"},"jupyter.lab.shortcuts":{items:{$ref:"#/definitions/shortcut"},type:"array",default:[]},"jupyter.lab.toolbars":{properties:{"^\\w[\\w-\\.]*$":{items:{$ref:"#/definitions/toolbarItem"},type:"array",default:[]}},type:"object",default:{}},"jupyter.lab.transform":{type:"boolean",default:!1}},definitions:{menu:{properties:{disabled:{description:"Whether the menu is disabled or not",type:"boolean",default:!1},icon:{description:"Menu icon id",type:"string"},id:{description:"Menu unique id",oneOf:[{type:"string",enum:["jp-menu-file","jp-menu-file-new","jp-menu-edit","jp-menu-help","jp-menu-kernel","jp-menu-run","jp-menu-settings","jp-menu-view","jp-menu-tabs"]},{type:"string",pattern:"[a-z][a-z0-9\\-_]+"}]},items:{description:"Menu items",type:"array",items:{$ref:"#/definitions/menuItem"}},label:{description:"Menu label",type:"string"},mnemonic:{description:"Mnemonic index for the label",type:"number",minimum:-1,default:-1},rank:{description:"Menu rank",type:"number",minimum:0}},required:["id"],type:"object"},menuItem:{properties:{args:{description:"Command arguments",type:"object"},command:{description:"Command id",type:"string"},disabled:{description:"Whether the item is disabled or not",type:"boolean",default:!1},type:{description:"Item type",type:"string",enum:["command","submenu","separator"],default:"command"},rank:{description:"Item rank",type:"number",minimum:0},submenu:{oneOf:[{$ref:"#/definitions/menu"},{type:"null"}]}},type:"object"},shortcut:{properties:{args:{title:"The arguments for the command",type:"object"},command:{title:"The command id",description:"The command executed when the binding is matched.",type:"string"},disabled:{description:"Whether this shortcut is disabled or not.",type:"boolean",default:!1},keys:{title:"The key sequence for the binding",description:"The key shortcut like `Accel A` or the sequence of shortcuts to press like [`Accel A`, `B`]",items:{type:"string"},type:"array"},macKeys:{title:"The key sequence for the binding on macOS",description:"The key shortcut like `Cmd A` or the sequence of shortcuts to press like [`Cmd A`, `B`]",items:{type:"string"},type:"array"},winKeys:{title:"The key sequence for the binding on Windows",description:"The key shortcut like `Ctrl A` or the sequence of shortcuts to press like [`Ctrl A`, `B`]",items:{type:"string"},type:"array"},linuxKeys:{title:"The key sequence for the binding on Linux",description:"The key shortcut like `Ctrl A` or the sequence of shortcuts to press like [`Ctrl A`, `B`]",items:{type:"string"},type:"array"},selector:{title:"CSS selector",type:"string"}},required:["command","keys","selector"],type:"object"},toolbarItem:{properties:{name:{title:"Unique name",type:"string"},args:{title:"Command arguments",type:"object"},command:{title:"Command id",type:"string",default:""},disabled:{title:"Whether the item is ignored or not",type:"boolean",default:!1},icon:{title:"Item icon id",description:"If defined, it will override the command icon",type:"string"},label:{title:"Item label",description:"If defined, it will override the command label",type:"string"},caption:{title:"Item caption",description:"If defined, it will override the command caption",type:"string"},type:{title:"Item type",type:"string",enum:["command","spacer"]},rank:{title:"Item rank",type:"number",minimum:0,default:50}},required:["name"],additionalProperties:!1,type:"object"},metadataForm:{type:"object",properties:{id:{type:"string",description:"The section ID"},metadataSchema:{type:"object",items:{$ref:"#/definitions/metadataSchema"}},uiSchema:{type:"object"},metadataOptions:{type:"object",items:{$ref:"#/definitions/metadataOptions"}},label:{type:"string",description:"The section label"},rank:{type:"integer",description:"The rank of the section in the right panel"},showModified:{type:"boolean",description:"Whether to show modified values from defaults"}},required:["id","metadataSchema"]},metadataSchema:{properties:{properties:{type:"object",description:"The property set up by extension",properties:{title:{type:"string"},description:{type:"string"},type:{type:"string"}}}},type:"object",required:["properties"]},metadataOptions:{properties:{customRenderer:{type:"string"},metadataLevel:{type:"string",enum:["cell","notebook"],default:"cell"},cellTypes:{type:"array",items:{type:"string",enum:["code","markdown","raw"]}},writeDefault:{type:"boolean"}},type:"object"}}}}}]);